<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Batch Rename Files with Digital Serial Numbers</title><meta name="author" content="Zane"><meta name="keywords" content="batch rename, file rename, digital serial numbers, automation scripts"><meta name="description" content="Scripts to batch rename files with digital serial numbers, supporting custom prefix, starting number, and zero-padding"><meta name="robots" content="index, follow"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="alternate" href="https://liuzane.github.io/en" hreflang="en"><link rel="alternate" href="https://liuzane.github.io/zh" hreflang="zh"><link rel="alternate" href="https://liuzane.github.io/ja" hreflang="ja"><link rel="alternate" href="https://liuzane.github.io" hreflang="x-default"><link rel="canonical" href="https://liuzane.github.io/en/2025/10/25/batch-rename-files-with-digital-serial-numbers.html"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/article.css"></head><body><div id="container"><div id="nav" class="frosted-glass fade-in"><nav id="nav-wrap"><a class="nav-link" href="/en">Home</a> <a class="nav-link" href="/en/archives">Archives</a> <a class="nav-link" href="/en/categories">Categories</a> <a class="nav-link" href="/en/works">Works</a> <a class="nav-link" href="/en/about">About</a></nav><div id="nav-lang"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="970" width="1.2rem" height="1.2rem"><path d="M1011.712 399.9744A512.1536 512.1536 0 0 0 512 0C229.2224 0 0 229.2224 0 512c0 282.7264 229.2224 512 512 512s512-229.2736 512-512c0-38.4512-4.2496-75.9808-12.288-112.0256zM94.976 512c0-52.1216 9.5744-101.9392 27.0336-147.968 22.1184 12.544 51.8656 14.848 51.8656 39.7824 0 82.432 3.072 170.8032 82.1248 172.1856 2.2528 0 44.032 15.0528 64 64 6.8608 16.896 34.1504 0 64 0 14.8992 0 0 23.808 0 75.264 0 51.3536 116.6848 130.304 116.6848 130.304-0.512 33.9456 0.9216 61.44 3.8912 83.3536a417.024 417.024 0 0 1-409.6-416.9216z m518.144 404.6336c16.4352-66.4064 24.4224-103.5776 58.7776-131.7888 49.664-40.8576 5.888-86.2208-31.8976-80.896-29.7984 4.3008-10.9568-34.9696-37.5808-37.12-26.624-2.0992-61.2864-52.224-99.584-69.4784-20.2752-9.1648-40.2432-33.6384-71.5264-34.7136-27.7504-1.024-68.2496 22.2208-68.2496 4.3008 0-57.7024-6.144-98.9184-7.424-115.3536-1.024-13.2096-9.1136-4.4544 28.3648-3.584 20.3776 0.512 10.4448-38.8608 30.6176-40.3968 19.8656-1.4848 67.072 17.6128 79.1552 9.984 11.2128-7.0656 82.2272 176.7936 82.2272 30.4128 0-17.408-9.472-47.616 0-64 37.5296-65.024 72.704-117.9648 69.5296-125.7472-1.792-4.352-38.4-7.936-67.6864 1.3824-9.8816 3.072 3.1232 17.7664-11.0592 20.9408-53.1968 11.6224-100.1984-13.6192-83.7632-37.376 16.896-24.2688 77.9264-10.5472 83.3024-59.3408 3.072-27.904 5.632-60.2624 7.3216-84.3264a417.536 417.536 0 0 1 326.4 259.584c-141.9776 103.424-105.6256 175.616-58.9824 216.8832 24.576 21.7088 47.9232 54.3744 63.1808 77.824a417.8944 417.8944 0 0 1-291.1232 262.8096z" p-id="971"></path></svg></div><div id="nav-lang-list" class="hidden"><a class="lang-link" href="/en/2025/10/25/batch-rename-files-with-digital-serial-numbers.html" hreflang="en">English</a> <a class="lang-link" href="/zh/2025/10/25/batch-rename-files-with-digital-serial-numbers.html" hreflang="zh">简体中文</a> <a class="lang-link" href="/ja/2025/10/25/batch-rename-files-with-digital-serial-numbers.html" hreflang="ja">日本語</a></div></div><div id="scroller" class="fade-in"><div id="wrapper"><header id="header" class="frosted-glass"><div class="header-wrapper"><img src="/images/aodamiao.jpg" alt="Zane" class="header-avatar"><p class="header-author">Zane</p><p class="header-description">Study hard and make progress every day</p></div></header><section id="content"><article class="article"><a class="article-back" href="javascript: history.back(-1)">&lt; Back</a><header class="article-header"><h1 class="article-title">Batch Rename Files with Digital Serial Numbers</h1><div class="article-meta"><time datetime="2025-10-25T10:48:50.384Z" class="article-date">2025-10-25</time></div></header><div class="article-content"><h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>Batch rename files by adding digital serial numbers. For example, with the following file structure:</p><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">image_folder</span><br><span class="line">|- 0asu78rec5k1.jpg</span><br><span class="line">|- 7ajzsdb1b32a.jpg</span><br><span class="line">|- ib1bls015hsh.jpg</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>After executing the script, the file structure will look like:</p><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">image_folder</span><br><span class="line">|- image_01.jpg</span><br><span class="line">|- image_02.jpg</span><br><span class="line">|- image_03.jpg</span><br><span class="line">...</span><br></pre></td></tr></table></figure><blockquote><p>Note: This script sorts files only in alphabetical order and doesn’t consider file creation time or other factors. If you want to sort by creation time, first batch rename the files in your current order, then run this script.</p></blockquote><h3 id="How-to-Use"><a href="#How-to-Use" class="headerlink" title="How to Use"></a>How to Use</h3><blog-tabs><blog-tab-panel name="Shell"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./rename.sh ./image_folder -p <span class="string">&quot;image_&quot;</span> -s 1 -z <span class="literal">true</span></span><br></pre></td></tr></table></figure></blog-tab-panel><blog-tab-panel name="CMD"><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">.\<span class="built_in">rename</span>.<span class="built_in">cmd</span> -d &quot;.\image_folder&quot; -p &quot;image_&quot; -s <span class="number">1</span> -z true</span><br></pre></td></tr></table></figure></blog-tab-panel></blog-tabs><table><thead><tr><th>Parameter</th><th>Description</th><th>Default Value</th></tr></thead><tbody><tr><td>-d</td><td>Target directory</td><td>Current directory</td></tr><tr><td>-p</td><td>Prefix for new filenames</td><td>Empty string</td></tr><tr><td>-s</td><td>Starting number for sequence</td><td>1</td></tr><tr><td>-z</td><td>Whether to pad numbers less than 10 with zero</td><td>true</td></tr><tr><td>-h</td><td>Show this help message</td><td>None</td></tr></tbody></table><h3 id="Source-Code"><a href="#Source-Code" class="headerlink" title="Source Code"></a>Source Code</h3><blog-tabs><blog-tab-panel name="Shell"><figure class="highlight bash"><figcaption><span>rename.sh</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Batch rename all files in the specified folder, supporting custom prefix and starting number</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Default parameter settings</span></span><br><span class="line">TARGET_DIR=<span class="string">&quot;.&quot;</span></span><br><span class="line">prefix=<span class="string">&quot;&quot;</span></span><br><span class="line">start_number=1</span><br><span class="line">pad_zero=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Show usage information</span></span><br><span class="line"><span class="function"><span class="title">show_usage</span></span>() &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Usage: <span class="variable">$0</span> [-d directory_path] [-p file_prefix] [-s starting_number] [-z zero_padding(true/false)]&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Options:&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;  -d directory_path    Specify the directory to process (default: current directory)&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;  -p file_prefix       Prefix for new filenames (default: empty)&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;  -s starting_number   Starting number for sequence (default: 1)&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;  -z true/false        Whether to pad numbers less than 10 with zero (default: true)&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;  -h                   Show this help message&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Examples:&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;  <span class="variable">$0</span> -d /path/to/dir -p img_ -s 1 -z true&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;  <span class="variable">$0</span> -d /path/to/dir -p photo_ -s 10 -z false&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Parse command line arguments</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">getopts</span> <span class="string">&quot;d:p:s:z:h&quot;</span> opt; <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">case</span> <span class="variable">$opt</span> <span class="keyword">in</span></span><br><span class="line">    d) TARGET_DIR=<span class="string">&quot;<span class="variable">$OPTARG</span>&quot;</span> ;;</span><br><span class="line">    p) prefix=<span class="string">&quot;<span class="variable">$OPTARG</span>&quot;</span> ;;</span><br><span class="line">    s) start_number=<span class="string">&quot;<span class="variable">$OPTARG</span>&quot;</span> ;;</span><br><span class="line">    z)</span><br><span class="line">      <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$OPTARG</span>&quot;</span> = <span class="string">&quot;false&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        pad_zero=<span class="literal">false</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        pad_zero=<span class="literal">true</span></span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">      ;;</span><br><span class="line">    h) show_usage; <span class="built_in">exit</span> 0 ;;</span><br><span class="line">    *) show_usage; <span class="built_in">exit</span> 1 ;;</span><br><span class="line">  <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Check if directory exists</span></span><br><span class="line"><span class="keyword">if</span> [ ! -d <span class="string">&quot;<span class="variable">$TARGET_DIR</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Error: Directory &#x27;<span class="variable">$TARGET_DIR</span>&#x27; does not exist&quot;</span></span><br><span class="line">  <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter target directory</span></span><br><span class="line"><span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$TARGET_DIR</span>&quot;</span> || <span class="built_in">exit</span> 1</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Starting to rename files in &#x27;<span class="variable">$TARGET_DIR</span>&#x27;...&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Prefix: &#x27;<span class="variable">$prefix</span>&#x27;&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Starting number: <span class="variable">$start_number</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Zero padding: <span class="variable">$pad_zero</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get all files sorted alphabetically, excluding directories and current script</span></span><br><span class="line">files=()</span><br><span class="line">script_name=<span class="string">&quot;<span class="subst">$(basename <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>&quot;</span></span><br><span class="line"><span class="keyword">while</span> IFS= <span class="built_in">read</span> -r file; <span class="keyword">do</span></span><br><span class="line">  <span class="comment"># Ensure it&#x27;s a file (not directory) and exclude the current script</span></span><br><span class="line">  <span class="keyword">if</span> [ -f <span class="string">&quot;<span class="variable">$file</span>&quot;</span> ] &amp;&amp; [ <span class="string">&quot;<span class="variable">$file</span>&quot;</span> != <span class="string">&quot;<span class="variable">$script_name</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    files+=(<span class="string">&quot;<span class="variable">$file</span>&quot;</span>)</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span> &lt; &lt;(<span class="built_in">ls</span> -1 | grep -v <span class="string">&quot;^$script_name$&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check if there are files to rename</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$&#123;#files[@]&#125;</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Error: No files to rename in directory &#x27;<span class="variable">$TARGET_DIR</span>&#x27;&quot;</span></span><br><span class="line">  <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># File sequence starts from specified value</span></span><br><span class="line">count=<span class="variable">$start_number</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Iterate and rename files</span></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;files[@]&#125;</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">  <span class="comment"># Get file extension</span></span><br><span class="line">  extension=<span class="string">&quot;<span class="variable">$&#123;file##*.&#125;</span>&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># Set format string based on zero padding option</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$pad_zero</span>&quot;</span> = <span class="literal">true</span> ]; <span class="keyword">then</span></span><br><span class="line">    format=<span class="string">&quot;%02d&quot;</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    format=<span class="string">&quot;%d&quot;</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># Format the number</span></span><br><span class="line">  new_name=<span class="string">&quot;<span class="variable">$&#123;prefix&#125;</span><span class="subst">$(printf <span class="string">&quot;<span class="variable">$format</span>&quot;</span> <span class="string">&quot;<span class="variable">$count</span>&quot;</span>)</span>&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># If file has extension, preserve it</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$file</span>&quot;</span> != <span class="string">&quot;<span class="variable">$extension</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">      new_name=<span class="string">&quot;<span class="variable">$&#123;new_name&#125;</span>.<span class="variable">$&#123;extension&#125;</span>&quot;</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># Check if new filename already exists</span></span><br><span class="line">  <span class="keyword">if</span> [ -e <span class="string">&quot;<span class="variable">$new_name</span>&quot;</span> ] &amp;&amp; [ <span class="string">&quot;<span class="variable">$file</span>&quot;</span> != <span class="string">&quot;<span class="variable">$new_name</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Warning: File &#x27;<span class="variable">$new_name</span>&#x27; already exists, skipping renaming of &#x27;<span class="variable">$file</span>&#x27;&quot;</span></span><br><span class="line">    <span class="built_in">continue</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># Perform the rename</span></span><br><span class="line">  <span class="built_in">mv</span> <span class="string">&quot;<span class="variable">$file</span>&quot;</span> <span class="string">&quot;<span class="variable">$new_name</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Renamed: &#x27;<span class="variable">$file</span>&#x27; -&gt; &#x27;<span class="variable">$new_name</span>&#x27;&quot;</span></span><br><span class="line">  </span><br><span class="line">  count=$((count + <span class="number">1</span>))</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Rename completed, processed <span class="variable">$&#123;#files[@]&#125;</span> files&quot;</span></span><br></pre></td></tr></table></figure></blog-tab-panel><blog-tab-panel name="CMD"><figure class="highlight cmd"><figcaption><span>rename.cmd</span></figcaption><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">chcp</span> <span class="number">65001</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="built_in">setlocal</span> enabledelayedexpansion</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">rem Batch rename file script - supports command line parameters</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">rem Default parameter settings</span></span><br><span class="line"><span class="built_in">set</span> &quot;TARGET_DIR=.&quot;</span><br><span class="line"><span class="built_in">set</span> &quot;prefix=pic_&quot;</span><br><span class="line"><span class="built_in">set</span> &quot;start_num=<span class="number">1</span>&quot;</span><br><span class="line"><span class="built_in">set</span> &quot;zero_pad=true&quot;</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">rem Check if there are command line arguments</span></span><br><span class="line">:has_args</span><br><span class="line"><span class="keyword">if</span> &quot;%~<span class="number">1</span>&quot;==&quot;&quot; (</span><br><span class="line">  <span class="built_in">echo</span> &quot;%~<span class="number">1</span>&quot;</span><br><span class="line">  <span class="keyword">call</span> :show_usage</span><br><span class="line">  <span class="keyword">exit</span> <span class="number">0</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> &quot;%~<span class="number">1</span>&quot;==&quot;-h&quot; (</span><br><span class="line">  <span class="keyword">call</span> :show_usage</span><br><span class="line">  <span class="keyword">exit</span> <span class="number">0</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">rem Parse command line arguments</span></span><br><span class="line">:parse_args</span><br><span class="line"><span class="keyword">if</span> &quot;%~<span class="number">1</span>&quot;==&quot;-d&quot; (</span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> &quot;%~<span class="number">2</span>&quot;==&quot;&quot; (</span><br><span class="line">    <span class="built_in">set</span> &quot;TARGET_DIR=%~<span class="number">2</span>&quot;</span><br><span class="line">    <span class="built_in">shift</span> /<span class="number">1</span></span><br><span class="line">    <span class="built_in">shift</span> /<span class="number">1</span></span><br><span class="line">    <span class="keyword">goto</span> parse_args</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> &quot;%~<span class="number">1</span>&quot;==&quot;-p&quot; (</span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> &quot;%~<span class="number">2</span>&quot;==&quot;&quot; (</span><br><span class="line">    <span class="built_in">set</span> &quot;prefix=%~<span class="number">2</span>&quot;</span><br><span class="line">    <span class="built_in">shift</span> /<span class="number">1</span></span><br><span class="line">    <span class="built_in">shift</span> /<span class="number">1</span></span><br><span class="line">    <span class="keyword">goto</span> parse_args</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> &quot;%~<span class="number">1</span>&quot;==&quot;-s&quot; (</span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> &quot;%~<span class="number">2</span>&quot;==&quot;&quot; (</span><br><span class="line">    <span class="built_in">set</span> &quot;start_num=%~<span class="number">2</span>&quot;</span><br><span class="line">    <span class="built_in">shift</span> /<span class="number">1</span></span><br><span class="line">    <span class="built_in">shift</span> /<span class="number">1</span></span><br><span class="line">    <span class="keyword">goto</span> parse_args</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> &quot;%~<span class="number">1</span>&quot;==&quot;-z&quot; (</span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> &quot;%~<span class="number">2</span>&quot;==&quot;&quot; (</span><br><span class="line">    <span class="built_in">set</span> &quot;zero_pad=%~<span class="number">2</span>&quot;</span><br><span class="line">    <span class="built_in">shift</span> /<span class="number">1</span></span><br><span class="line">    <span class="built_in">shift</span> /<span class="number">1</span></span><br><span class="line">    <span class="keyword">goto</span> parse_args</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:args_done</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">rem Check if directory exists</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> &quot;<span class="variable">%TARGET_DIR%</span>&quot; (</span><br><span class="line">  <span class="built_in">echo</span> Error: Directory &quot;<span class="variable">%TARGET_DIR%</span>&quot; does <span class="keyword">not</span> <span class="keyword">exist</span></span><br><span class="line">  <span class="keyword">exit</span> <span class="number">1</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">rem Enter target directory</span></span><br><span class="line"><span class="built_in">pushd</span> &quot;<span class="variable">%TARGET_DIR%</span>&quot; || (</span><br><span class="line">  <span class="built_in">echo</span> Error: Cannot enter directory &quot;<span class="variable">%TARGET_DIR%</span>&quot;</span><br><span class="line">  <span class="keyword">exit</span> <span class="number">1</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> Starting to <span class="built_in">rename</span> files <span class="keyword">in</span> &quot;%TARGET_DIR&quot;...</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">rem Use temporary file to store filename list</span></span><br><span class="line"><span class="built_in">set</span> &quot;TEMP_FILE=<span class="variable">%TEMP%</span>\rename_files_list.txt&quot;</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">rem Get all files (excluding directories and current script), sorted alphabetically</span></span><br><span class="line"><span class="built_in">dir</span> /b /a-d | <span class="built_in">findstr</span> /v /i &quot;%~nx0&quot; &gt; &quot;<span class="variable">%TEMP_FILE%</span>&quot;</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">rem Check if there are files to rename</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> &quot;<span class="variable">%TEMP_FILE%</span>&quot; (</span><br><span class="line">  <span class="built_in">echo</span> Error: Cannot create temporary file</span><br><span class="line">  <span class="keyword">goto</span> cleanup</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="variable">%%I</span> <span class="keyword">in</span> (&quot;<span class="variable">%TEMP_FILE%</span>&quot;) <span class="keyword">do</span> (</span><br><span class="line">  <span class="keyword">if</span> <span class="variable">%%~</span>zI <span class="keyword">equ</span> <span class="number">0</span> (</span><br><span class="line">    <span class="built_in">echo</span> Error: No files to <span class="built_in">rename</span> <span class="keyword">in</span> directory &quot;<span class="variable">%TARGET_DIR%</span>&quot;</span><br><span class="line">    <span class="keyword">goto</span> cleanup</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">rem Use starting number as counter</span></span><br><span class="line"><span class="built_in">set</span> &quot;count=<span class="variable">%start_num%</span>&quot;</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">rem Iterate and rename files</span></span><br><span class="line"><span class="keyword">for</span> /f &quot;usebackq delims=&quot; <span class="variable">%%F</span> <span class="keyword">in</span> (&quot;<span class="variable">%TEMP_FILE%</span>&quot;) <span class="keyword">do</span> (</span><br><span class="line"><span class="comment">  rem Get file extension</span></span><br><span class="line">  <span class="built_in">set</span> &quot;file=<span class="variable">%%F</span>&quot;</span><br><span class="line">  <span class="built_in">set</span> &quot;extension=&quot;</span><br><span class="line">  <span class="keyword">for</span> <span class="variable">%%E</span> <span class="keyword">in</span> (&quot;<span class="variable">%%F</span>&quot;) <span class="keyword">do</span> <span class="built_in">set</span> &quot;extension=<span class="variable">%%~</span>xE&quot;</span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  rem Format number (based on zero padding option)</span></span><br><span class="line">  <span class="keyword">if</span> &quot;<span class="variable">!zero_pad!</span>&quot;==&quot;true&quot; (</span><br><span class="line"><span class="comment">    rem Only pad numbers less than 10 with zero</span></span><br><span class="line">    <span class="keyword">if</span> <span class="variable">!count!</span> <span class="keyword">lss</span> <span class="number">10</span> (</span><br><span class="line">      <span class="built_in">set</span> &quot;formatted_count=<span class="number">0</span><span class="variable">!count!</span>&quot;</span><br><span class="line">    ) <span class="keyword">else</span> (</span><br><span class="line">      <span class="built_in">set</span> &quot;formatted_count=<span class="variable">!count!</span>&quot;</span><br><span class="line">    )</span><br><span class="line">  ) <span class="keyword">else</span> (</span><br><span class="line">    <span class="built_in">set</span> &quot;formatted_count=<span class="variable">!count!</span>&quot;</span><br><span class="line">  )</span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  rem Build new filename</span></span><br><span class="line">  <span class="built_in">set</span> &quot;new_name=<span class="variable">!prefix!</span><span class="variable">!formatted_count!</span>&quot;</span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  rem If file has extension, preserve it</span></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> &quot;<span class="variable">!extension!</span>&quot;==&quot;&quot; (</span><br><span class="line">    <span class="built_in">set</span> &quot;new_name=<span class="variable">!new_name!</span><span class="variable">!extension!</span>&quot;</span><br><span class="line">  )</span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  rem Check if new filename already exists</span></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">exist</span> &quot;<span class="variable">!new_name!</span>&quot; <span class="keyword">if</span> <span class="keyword">not</span> &quot;<span class="variable">!new_name!</span>&quot;==&quot;<span class="variable">!file!</span>&quot; (</span><br><span class="line">    <span class="built_in">echo</span> Warning: File &quot;<span class="variable">!new_name!</span>&quot; already exists, skipping renaming of &quot;<span class="variable">!file!</span>&quot;</span><br><span class="line">    <span class="built_in">set</span> /a &quot;count+=<span class="number">1</span>&quot;</span><br><span class="line">    <span class="keyword">goto</span> next_file</span><br><span class="line">  )</span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  rem Execute rename</span></span><br><span class="line">  <span class="built_in">ren</span> &quot;<span class="variable">!file!</span>&quot; &quot;<span class="variable">!new_name!</span>&quot;</span><br><span class="line">  <span class="built_in">echo</span> Renamed: &quot;<span class="variable">!file!</span>&quot; -^&gt; &quot;<span class="variable">!new_name!</span>&quot;</span><br><span class="line">  </span><br><span class="line">  :next_file</span><br><span class="line"><span class="comment">  rem Increment counter</span></span><br><span class="line">  <span class="built_in">set</span> /a &quot;count+=<span class="number">1</span>&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:cleanup</span><br><span class="line"><span class="comment">rem Clean up temporary file</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">exist</span> &quot;<span class="variable">%TEMP_FILE%</span>&quot; <span class="built_in">del</span> &quot;<span class="variable">%TEMP_FILE%</span>&quot; <span class="number">2</span>&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">rem Return to original directory</span></span><br><span class="line"><span class="built_in">popd</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">Rename</span> completed</span><br><span class="line"><span class="keyword">exit</span> <span class="number">0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">rem Show help information function</span></span><br><span class="line">:show_usage</span><br><span class="line"><span class="built_in">echo</span> Usage: %~nx0 [options]</span><br><span class="line"><span class="built_in">echo</span> Options:</span><br><span class="line"><span class="built_in">echo</span>   -d directory_path    Specify directory to process (default: current directory)</span><br><span class="line"><span class="built_in">echo</span>   -p prefix            Specify file prefix (default: pic_)</span><br><span class="line"><span class="built_in">echo</span>   -s starting_number   Specify starting number (default: <span class="number">1</span>)</span><br><span class="line"><span class="built_in">echo</span>   -z [true/false]      Whether to pad zero (default: true)</span><br><span class="line"><span class="built_in">echo</span>   -h                   Show this <span class="built_in">help</span> message</span><br><span class="line"><span class="keyword">exit</span> <span class="number">0</span></span><br></pre></td></tr></table></figure></blog-tab-panel></blog-tabs></div><div class="comment-divider"></div><script src="https://giscus.app/client.js" data-lang="en" data-repo="liuzane&#x2F;liuzane.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkyMTY3ODEyNDM&#x3D;" data-category="Announcements" data-category-id="DIC_kwDODOvRu84CwfsS" data-mapping="title" data-strict="1" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="preferred_color_scheme" crossorigin="anonymous" async></script></article></section><footer id="footer" class="frosted-glass"><div class="footer-wrapper"><a href="/" class="footer-title">Zane&#39;s Blog</a><p>This little world was built by me</p></div></footer></div></div><script src="/js/i18n.js"></script><script src="/web-components/utils/style-manger.js"></script><script src="/web-components/blog-base.js"></script><script src="/web-components/blog-tabs.js"></script><script src="/web-components/blog-tab-panel.js"></script></div></body></html>