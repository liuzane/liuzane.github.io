<!doctype html><html lang="ja"><head><meta charset="utf-8"><title>JavaScript ユーティリティ関数</title><meta name="author" content="柳葉刀とコード"><meta name="keywords" content="JavaScript, ユーティリティ関数, コレクション, メソッド, 検証, コピー, UUID, ダウンロード, パスパラメータ, オブジェクト形式, 千の区切り, hyperscript"><meta name="description" content="JavaScriptのユーティリティ関数コレクションの紹介。データ型検証、ディープコピー、UUID生成、ファイルダウンロード、名前によるパスパラメータ取得、パスパラメータのオブジェクト形式への変換、オブジェクト形式のパスパラメータへの変換、オブジェクトの深い値の取得、千の区切り形式への変換、JSによるHTMLノード生成を含む。"><meta name="robots" content="index, follow"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="alternate" href="https://liuzane.github.io/en" hreflang="en"><link rel="alternate" href="https://liuzane.github.io/zh" hreflang="zh"><link rel="alternate" href="https://liuzane.github.io/ja" hreflang="ja"><link rel="alternate" href="https://liuzane.github.io" hreflang="x-default"><link rel="canonical" href="https://liuzane.github.io/ja/2020/12/10/javascript-utility-functions.html"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/article.css"></head><body><div id="container"><div id="nav" class="frosted-glass fade-in"><nav id="nav-wrap"><a class="nav-link" href="/ja">ホーム</a> <a class="nav-link" href="/ja/archives">アーカイブ</a> <a class="nav-link" href="/ja/categories">カテゴリ</a> <a class="nav-link" href="/ja/works">作品</a> <a class="nav-link" href="/ja/about">紹介</a></nav><div id="nav-lang"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="970" width="1.2rem" height="1.2rem"><path d="M1011.712 399.9744A512.1536 512.1536 0 0 0 512 0C229.2224 0 0 229.2224 0 512c0 282.7264 229.2224 512 512 512s512-229.2736 512-512c0-38.4512-4.2496-75.9808-12.288-112.0256zM94.976 512c0-52.1216 9.5744-101.9392 27.0336-147.968 22.1184 12.544 51.8656 14.848 51.8656 39.7824 0 82.432 3.072 170.8032 82.1248 172.1856 2.2528 0 44.032 15.0528 64 64 6.8608 16.896 34.1504 0 64 0 14.8992 0 0 23.808 0 75.264 0 51.3536 116.6848 130.304 116.6848 130.304-0.512 33.9456 0.9216 61.44 3.8912 83.3536a417.024 417.024 0 0 1-409.6-416.9216z m518.144 404.6336c16.4352-66.4064 24.4224-103.5776 58.7776-131.7888 49.664-40.8576 5.888-86.2208-31.8976-80.896-29.7984 4.3008-10.9568-34.9696-37.5808-37.12-26.624-2.0992-61.2864-52.224-99.584-69.4784-20.2752-9.1648-40.2432-33.6384-71.5264-34.7136-27.7504-1.024-68.2496 22.2208-68.2496 4.3008 0-57.7024-6.144-98.9184-7.424-115.3536-1.024-13.2096-9.1136-4.4544 28.3648-3.584 20.3776 0.512 10.4448-38.8608 30.6176-40.3968 19.8656-1.4848 67.072 17.6128 79.1552 9.984 11.2128-7.0656 82.2272 176.7936 82.2272 30.4128 0-17.408-9.472-47.616 0-64 37.5296-65.024 72.704-117.9648 69.5296-125.7472-1.792-4.352-38.4-7.936-67.6864 1.3824-9.8816 3.072 3.1232 17.7664-11.0592 20.9408-53.1968 11.6224-100.1984-13.6192-83.7632-37.376 16.896-24.2688 77.9264-10.5472 83.3024-59.3408 3.072-27.904 5.632-60.2624 7.3216-84.3264a417.536 417.536 0 0 1 326.4 259.584c-141.9776 103.424-105.6256 175.616-58.9824 216.8832 24.576 21.7088 47.9232 54.3744 63.1808 77.824a417.8944 417.8944 0 0 1-291.1232 262.8096z" p-id="971"></path></svg></div><div id="nav-lang-list" class="hidden"><a class="lang-link" href="/en/2020/12/10/javascript-utility-functions.html" hreflang="en">English</a> <a class="lang-link" href="/zh/2020/12/10/javascript-utility-functions.html" hreflang="zh">简体中文</a> <a class="lang-link" href="/ja/2020/12/10/javascript-utility-functions.html" hreflang="ja">日本語</a></div></div><div id="scroller" class="fade-in"><div id="wrapper"><header id="header" class="frosted-glass"><div class="header-wrapper"><img src="/images/aodamiao.jpg" alt="柳葉刀とコード" class="header-avatar"><p class="header-author">柳葉刀とコード</p><p class="header-description">日々精進、向上心を忘れず</p></div></header><section id="content"><article class="article"><a class="article-back" href="javascript: history.back(-1)">&lt; 戻る</a><header class="article-header"><h1 class="article-title">JavaScript ユーティリティ関数</h1><div class="article-meta"><time datetime="2024-05-16T10:35:00.000Z" class="article-date">2024-05-16</time></div></header><div class="article-content"><h4 id="メソッドコレクション："><a href="#メソッドコレクション：" class="headerlink" title="メソッドコレクション："></a>メソッドコレクション：</h4><table><thead><tr><th>メソッド名</th><th>説明</th></tr></thead><tbody><tr><td><a href="#typeOf">typeOf</a></td><td>データ型を検証します。</td></tr><tr><td><a href="#deepCopy">deepCopy</a></td><td>ディープコピー。</td></tr><tr><td><a href="#formatDate">formatDate</a></td><td>日付フォーマット。</td></tr><tr><td><a href="#uuid">uuid</a></td><td>UUIDを生成します。</td></tr><tr><td><a href="#download">download</a></td><td>ファイルをダウンロードします。</td></tr><tr><td><a href="#getUrlArg">getUrlArg</a></td><td>名前でパスパラメータを取得します。</td></tr><tr><td><a href="#getUrlQuery">getUrlQuery</a></td><td>パスパラメータをオブジェクト形式に変換します。</td></tr><tr><td><a href="#setUrlQuery">setUrlQuery</a></td><td>オブジェクト形式をパスパラメータに変換します。</td></tr><tr><td><a href="#getDeepValueOfObject">getDeepValueOfObject</a></td><td>オブジェクトの深い値を取得します。</td></tr><tr><td><a href="#toThousands">toThousands</a></td><td>千の区切り形式に変換します。</td></tr><tr><td><a href="#hyperscript">hyperscript</a></td><td>JSでHTMLノードを生成します。</td></tr></tbody></table><ul><li><h4 id="typeOf"><a href="#typeOf" class="headerlink" title="typeOf"></a>typeOf</h4></li></ul><blog-tabs><blog-tab-panel name="JavaScript"><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* データ型を検証します。</span></span><br><span class="line"><span class="comment">* <span class="doctag">@method</span> <span class="variable">typeOf</span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type">any</span>&#125; <span class="variable">obj</span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">typeOf</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">TypeMap</span> = &#123;</span><br><span class="line">    <span class="string">&#x27;[object Boolean]&#x27;</span>: <span class="string">&#x27;boolean&#x27;</span>, </span><br><span class="line">    <span class="string">&#x27;[object Number]&#x27;</span>: <span class="string">&#x27;number&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;[object String]&#x27;</span>: <span class="string">&#x27;string&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;[object Function]&#x27;</span>: <span class="string">&#x27;function&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;[object Array]&#x27;</span>: <span class="string">&#x27;array&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;[object Date]&#x27;</span>: <span class="string">&#x27;date&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;[object RegExp]&#x27;</span>: <span class="string">&#x27;regexp&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;[object Undefined]&#x27;</span>: <span class="string">&#x27;undefined&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;[object Null]&#x27;</span>: <span class="string">&#x27;null&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;[object Object]&#x27;</span>: <span class="string">&#x27;object&#x27;</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> toString = <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">TypeMap</span>[toString.<span class="title function_">call</span>(obj)];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">typeOf</span>(<span class="string">&#x27;abc&#x27;</span>)); <span class="comment">// string</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">typeOf</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])); <span class="comment">// array</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">typeOf</span>(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;)); <span class="comment">// object</span></span><br></pre></td></tr></table></figure></blog-tab-panel><blog-tab-panel name="TypeScript"><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">TypeValueEnum</span> &#123;</span><br><span class="line">  <span class="title class_">Boolean</span> = <span class="string">&#x27;boolean&#x27;</span>,</span><br><span class="line">  <span class="title class_">Number</span> = <span class="string">&#x27;number&#x27;</span>,</span><br><span class="line">  <span class="title class_">String</span> = <span class="string">&#x27;string&#x27;</span>,</span><br><span class="line">  <span class="title class_">Function</span> = <span class="string">&#x27;function&#x27;</span>,</span><br><span class="line">  <span class="title class_">Array</span> = <span class="string">&#x27;array&#x27;</span>,</span><br><span class="line">  <span class="title class_">Date</span> = <span class="string">&#x27;date&#x27;</span>,</span><br><span class="line">  <span class="title class_">RegExp</span> = <span class="string">&#x27;regexp&#x27;</span>,</span><br><span class="line">  <span class="title class_">Undefined</span> = <span class="string">&#x27;undefined&#x27;</span>,</span><br><span class="line">  <span class="title class_">Null</span> = <span class="string">&#x27;null&#x27;</span>,</span><br><span class="line">  <span class="title class_">Object</span> = <span class="string">&#x27;object&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* データ型を検証します。</span></span><br><span class="line"><span class="comment">* <span class="doctag">@method</span> <span class="variable">typeOf</span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type">unknown</span>&#125; <span class="variable">obj</span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> &#123;<span class="type">TypeValueEnum</span>&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">typeOf</span>(<span class="params"><span class="attr">obj</span>: <span class="built_in">unknown</span></span>): <span class="title class_">TypeValueEnum</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">TypeMap</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="title class_">TypeValueEnum</span>&gt; = &#123;</span><br><span class="line">    <span class="string">&#x27;[object Boolean]&#x27;</span>: <span class="title class_">TypeValueEnum</span>.<span class="property">Boolean</span>, </span><br><span class="line">    <span class="string">&#x27;[object Number]&#x27;</span>: <span class="title class_">TypeValueEnum</span>.<span class="property">Number</span>,</span><br><span class="line">    <span class="string">&#x27;[object String]&#x27;</span>: <span class="title class_">TypeValueEnum</span>.<span class="property">String</span>,</span><br><span class="line">    <span class="string">&#x27;[object Function]&#x27;</span>: <span class="title class_">TypeValueEnum</span>.<span class="property">Function</span>,</span><br><span class="line">    <span class="string">&#x27;[object Array]&#x27;</span>: <span class="title class_">TypeValueEnum</span>.<span class="property">Array</span>,</span><br><span class="line">    <span class="string">&#x27;[object Date]&#x27;</span>: <span class="title class_">TypeValueEnum</span>.<span class="property">Date</span>,</span><br><span class="line">    <span class="string">&#x27;[object RegExp]&#x27;</span>: <span class="title class_">TypeValueEnum</span>.<span class="property">RegExp</span>,</span><br><span class="line">    <span class="string">&#x27;[object Undefined]&#x27;</span>: <span class="title class_">TypeValueEnum</span>.<span class="property">Undefined</span>,</span><br><span class="line">    <span class="string">&#x27;[object Null]&#x27;</span>: <span class="title class_">TypeValueEnum</span>.<span class="property">Null</span>,</span><br><span class="line">    <span class="string">&#x27;[object Object]&#x27;</span>: <span class="title class_">TypeValueEnum</span>.<span class="property">Object</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">toString</span>: <span class="built_in">string</span> = <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">TypeMap</span>[toString.<span class="title function_">call</span>(obj)];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">typeOf</span>(<span class="string">&#x27;abc&#x27;</span>)); <span class="comment">// string</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">typeOf</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])); <span class="comment">// array</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">typeOf</span>(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;)); <span class="comment">// object</span></span><br></pre></td></tr></table></figure></blog-tab-panel></blog-tabs><ul><li><h4 id="deepCopy"><a href="#deepCopy" class="headerlink" title="deepCopy"></a>deepCopy</h4></li></ul><blockquote><p>このメソッドは <code>typeOf()</code> メソッドと組み合わせて使用する必要があります。</p></blockquote><blog-tabs><blog-tab-panel name="JavaScript"><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ディープコピー。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">deepCopy</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">array|object</span>&#125; <span class="variable">data</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">array|object</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">deepCopy</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> type = <span class="title function_">typeOf</span>(data);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;array&#x27;</span>: &#123;</span><br><span class="line">      <span class="keyword">const</span> array = [];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; data.<span class="property">length</span>; index++) &#123;</span><br><span class="line">        array.<span class="title function_">push</span>(<span class="title function_">deepCopy</span>(data[index]));</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> array;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;object&#x27;</span>: &#123;</span><br><span class="line">      <span class="keyword">const</span> object = &#123;&#125;;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(data, key)) &#123;</span><br><span class="line">          object[key] = <span class="title function_">deepCopy</span>(data[key]);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> object;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = <span class="title function_">deepCopy</span>(obj1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1 === obj2); <span class="comment">// false</span></span><br></pre></td></tr></table></figure></blog-tab-panel><blog-tab-panel name="TypeScript"><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ディープコピー。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">deepCopy</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">array|object</span>&#125; <span class="variable">data</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">array|object</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> deepCopy&lt;T&gt;(<span class="attr">data</span>: T): T &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">type</span>: <span class="title class_">TypeValueEnum</span> = <span class="title function_">typeOf</span>(data);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> (<span class="keyword">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">TypeValueEnum</span>.<span class="property">Array</span>: &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="attr">array</span>: <span class="built_in">unknown</span>[] = [];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; (data <span class="keyword">as</span> <span class="built_in">unknown</span>[]).<span class="property">length</span>; index++) &#123;</span><br><span class="line">        array.<span class="title function_">push</span>(<span class="title function_">deepCopy</span>(data[index]));</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> array <span class="keyword">as</span> T;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">TypeValueEnum</span>.<span class="property">Object</span>: &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="attr">object</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">unknown</span>&gt; = &#123;&#125;;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(data, key)) &#123;</span><br><span class="line">          <span class="built_in">object</span>[key] = <span class="title function_">deepCopy</span>(data[key]);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">object</span> <span class="keyword">as</span> T;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = <span class="title function_">deepCopy</span>(obj1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1 === obj2); <span class="comment">// false</span></span><br></pre></td></tr></table></figure></blog-tab-panel></blog-tabs><ul><li><h4 id="formatDate"><a href="#formatDate" class="headerlink" title="formatDate"></a>formatDate</h4></li></ul><blog-tabs><blog-tab-panel name="JavaScript"><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 日付フォーマット。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">formatDate</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string|date</span>&#125; <span class="variable">time</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">formatDate</span>(<span class="params">time, format = <span class="string">&#x27;yyyy-MM-dd hh:mm:ss&#x27;</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> date = time ? <span class="keyword">new</span> <span class="title class_">Date</span>(time) : <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">  <span class="keyword">const</span> dateValues = &#123;</span><br><span class="line">    <span class="string">&#x27;M+&#x27;</span>: date.<span class="title function_">getMonth</span>() + <span class="number">1</span>, <span class="comment">// 月</span></span><br><span class="line">    <span class="string">&#x27;d+&#x27;</span>: date.<span class="title function_">getDate</span>(), <span class="comment">// 日</span></span><br><span class="line">    <span class="string">&#x27;h+&#x27;</span>: date.<span class="title function_">getHours</span>(), <span class="comment">// 時</span></span><br><span class="line">    <span class="string">&#x27;m+&#x27;</span>: date.<span class="title function_">getMinutes</span>(), <span class="comment">// 分</span></span><br><span class="line">    <span class="string">&#x27;s+&#x27;</span>: date.<span class="title function_">getSeconds</span>(), <span class="comment">// 秒</span></span><br><span class="line">    <span class="string">&#x27;q+&#x27;</span>: <span class="title class_">Math</span>.<span class="title function_">floor</span>((date.<span class="title function_">getMonth</span>() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">// 四半期</span></span><br><span class="line">    <span class="string">&#x27;S&#x27;</span>: date.<span class="title function_">getMilliseconds</span>() <span class="comment">// ミリ秒</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="regexp">/(y&#123;4&#125;)/</span>.<span class="title function_">test</span>(format)) &#123;</span><br><span class="line">    format = format.<span class="title function_">replace</span>(<span class="title class_">RegExp</span>.<span class="property">$1</span>, (date.<span class="title function_">getFullYear</span>() + <span class="string">&#x27;&#x27;</span>).<span class="title function_">substr</span>(<span class="number">4</span> - <span class="title class_">RegExp</span>.<span class="property">$1</span>.<span class="property">length</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> dateValues) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;(&#x27;</span> + key + <span class="string">&#x27;)&#x27;</span>).<span class="title function_">test</span>(format)) &#123;</span><br><span class="line">      <span class="keyword">const</span> value = dateValues[key].<span class="title function_">toString</span>();</span><br><span class="line">      format = format.<span class="title function_">replace</span>(<span class="title class_">RegExp</span>.<span class="property">$1</span>, (<span class="title class_">RegExp</span>.<span class="property">$1</span>.<span class="property">length</span> === <span class="number">1</span>) ? value : (<span class="string">&#x27;00&#x27;</span> + value).<span class="title function_">substr</span>(value.<span class="property">length</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> format;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formatDate</span>(<span class="string">&#x27;2024-05-01&#x27;</span>)); <span class="comment">// &#x27;2024-05-01 00:00:00&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formatDate</span>(<span class="string">&#x27;2024-05-01&#x27;</span>, <span class="string">&#x27;yyyy-MM-dd&#x27;</span>)); <span class="comment">// &#x27;2024-05-01&#x27;</span></span><br></pre></td></tr></table></figure></blog-tab-panel><blog-tab-panel name="TypeScript"><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 日付フォーマット。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">formatDate</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string|date</span>&#125; <span class="variable">time</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">formatDate</span>(<span class="params"><span class="attr">time</span>: <span class="built_in">string</span> | <span class="title class_">Date</span>, <span class="attr">format</span>: <span class="built_in">string</span> = <span class="string">&#x27;yyyy-MM-dd hh:mm:ss&#x27;</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">date</span>: <span class="title class_">Date</span> = time ? <span class="keyword">new</span> <span class="title class_">Date</span>(time) : <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">dateValues</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">number</span>&gt; = &#123;</span><br><span class="line">    <span class="string">&#x27;M+&#x27;</span>: date.<span class="title function_">getMonth</span>() + <span class="number">1</span>, <span class="comment">// 月</span></span><br><span class="line">    <span class="string">&#x27;d+&#x27;</span>: date.<span class="title function_">getDate</span>(), <span class="comment">// 日</span></span><br><span class="line">    <span class="string">&#x27;h+&#x27;</span>: date.<span class="title function_">getHours</span>(), <span class="comment">// 時</span></span><br><span class="line">    <span class="string">&#x27;m+&#x27;</span>: date.<span class="title function_">getMinutes</span>(), <span class="comment">// 分</span></span><br><span class="line">    <span class="string">&#x27;s+&#x27;</span>: date.<span class="title function_">getSeconds</span>(), <span class="comment">// 秒</span></span><br><span class="line">    <span class="string">&#x27;q+&#x27;</span>: <span class="title class_">Math</span>.<span class="title function_">floor</span>((date.<span class="title function_">getMonth</span>() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">// 四半期</span></span><br><span class="line">    <span class="string">&#x27;S&#x27;</span>: date.<span class="title function_">getMilliseconds</span>() <span class="comment">// ミリ秒</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="regexp">/(y&#123;4&#125;)/</span>.<span class="title function_">test</span>(format)) &#123;</span><br><span class="line">    format = format.<span class="title function_">replace</span>(<span class="title class_">RegExp</span>.<span class="property">$1</span>, (date.<span class="title function_">getFullYear</span>() + <span class="string">&#x27;&#x27;</span>).<span class="title function_">substr</span>(<span class="number">4</span> - <span class="title class_">RegExp</span>.<span class="property">$1</span>.<span class="property">length</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> dateValues) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;(&#x27;</span> + key + <span class="string">&#x27;)&#x27;</span>).<span class="title function_">test</span>(format)) &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="attr">value</span>: <span class="built_in">string</span> = dateValues[key].<span class="title function_">toString</span>();</span><br><span class="line">      format = format.<span class="title function_">replace</span>(<span class="title class_">RegExp</span>.<span class="property">$1</span>, (<span class="title class_">RegExp</span>.<span class="property">$1</span>.<span class="property">length</span> === <span class="number">1</span>) ? value : (<span class="string">&#x27;00&#x27;</span> + value).<span class="title function_">substr</span>(value.<span class="property">length</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> format;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formatDate</span>(<span class="string">&#x27;2024-05-01&#x27;</span>)); <span class="comment">// &#x27;2024-05-01 00:00:00&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formatDate</span>(<span class="string">&#x27;2024-05-01&#x27;</span>, <span class="string">&#x27;yyyy-MM-dd&#x27;</span>)); <span class="comment">// &#x27;2024-05-01&#x27;</span></span><br></pre></td></tr></table></figure></blog-tab-panel></blog-tabs><ul><li><h4 id="uuid"><a href="#uuid" class="headerlink" title="uuid"></a>uuid</h4></li></ul><blog-tabs><blog-tab-panel name="JavaScript"><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * UUIDを生成します。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">uuid</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">uuid</span>(<span class="params"></span>): string &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&#x27;</span>.<span class="title function_">replace</span>(<span class="regexp">/[xy]/g</span>, <span class="keyword">function</span> (<span class="params">c</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> r = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">16</span> | <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> v = c === <span class="string">&#x27;x&#x27;</span> ? r : (r &amp; <span class="number">0x3</span> | <span class="number">0x8</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> v.<span class="title function_">toString</span>(<span class="number">16</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">uuid</span>()); <span class="comment">// xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</span></span><br></pre></td></tr></table></figure></blog-tab-panel><blog-tab-panel name="TypeScript"><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * UUIDを生成します。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">uuid</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">uuid</span>(<span class="params"></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&#x27;</span>.<span class="title function_">replace</span>(<span class="regexp">/[xy]/g</span>, <span class="keyword">function</span> (<span class="params">c</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">r</span>: <span class="built_in">number</span> = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">16</span> | <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">v</span>: <span class="built_in">number</span> = c === <span class="string">&#x27;x&#x27;</span> ? r : (r &amp; <span class="number">0x3</span> | <span class="number">0x8</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> v.<span class="title function_">toString</span>(<span class="number">16</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">uuid</span>()); <span class="comment">// xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</span></span><br></pre></td></tr></table></figure></blog-tab-panel></blog-tabs><ul><li><h4 id="download"><a href="#download" class="headerlink" title="download"></a>download</h4></li></ul><blog-tabs><blog-tab-panel name="JavaScript"><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ファイルをダウンロードします。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">download</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">url</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">name</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">download</span>(<span class="params">url, name</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> aDom = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">  aDom.<span class="property">download</span> = name;</span><br><span class="line">  aDom.<span class="property">href</span> = url;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(aDom);</span><br><span class="line">  aDom.<span class="title function_">click</span>();</span><br><span class="line">  aDom.<span class="title function_">remove</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">download</span>(<span class="string">&#x27;word.docx&#x27;</span>, <span class="string">&#x27;https://www.test.com/word.docx&#x27;</span>)); <span class="comment">// word.docx</span></span><br></pre></td></tr></table></figure></blog-tab-panel><blog-tab-panel name="TypeScript"><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ファイルをダウンロードします。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">download</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">url</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">name</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">download</span>(<span class="params"><span class="attr">url</span>: <span class="built_in">string</span>, <span class="attr">name</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">aDom</span>: <span class="title class_">HTMLAnchorElement</span> = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">  aDom.<span class="property">download</span> = name;</span><br><span class="line">  aDom.<span class="property">href</span> = url;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(aDom);</span><br><span class="line">  aDom.<span class="title function_">click</span>();</span><br><span class="line">  aDom.<span class="title function_">remove</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">download</span>(<span class="string">&#x27;word.docx&#x27;</span>, <span class="string">&#x27;https://www.test.com/word.docx&#x27;</span>)); <span class="comment">// word.docx</span></span><br></pre></td></tr></table></figure></blog-tab-panel></blog-tabs><ul><li><h4 id="getUrlArg"><a href="#getUrlArg" class="headerlink" title="getUrlArg"></a>getUrlArg</h4></li></ul><blog-tabs><blog-tab-panel name="JavaScript"><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * URLからパラメータ値を取得します。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">getUrlArg</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">name</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getUrlArg</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> search = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">search</span>;</span><br><span class="line">  <span class="keyword">const</span> regexp = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">`(^|&amp;)<span class="subst">$&#123;name&#125;</span>=([^&amp;]*)(&amp;|$)`</span>);</span><br><span class="line">  <span class="keyword">const</span> arg = search.<span class="title function_">substr</span>(<span class="number">1</span>).<span class="title function_">match</span>(regexp);</span><br><span class="line">  <span class="keyword">return</span> arg ? arg[<span class="number">2</span>] : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blog-tab-panel><blog-tab-panel name="TypeScript"><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * URLからパラメータ値を取得します。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">getUrlArg</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">name</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getUrlArg</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">search</span>: <span class="built_in">string</span> = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">search</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">regexp</span>: <span class="title class_">RegExp</span> = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">`(^|&amp;)<span class="subst">$&#123;name&#125;</span>=([^&amp;]*)(&amp;|$)`</span>);</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">arg</span>: <span class="title class_">RegExpExecArray</span> | <span class="literal">null</span> = search.<span class="title function_">substr</span>(<span class="number">1</span>).<span class="title function_">match</span>(regexp);</span><br><span class="line">  <span class="keyword">return</span> arg ? arg[<span class="number">2</span>] : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blog-tab-panel></blog-tabs><ul><li><h4 id="getUrlQuery"><a href="#getUrlQuery" class="headerlink" title="getUrlQuery"></a>getUrlQuery</h4></li></ul><blog-tabs><blog-tab-panel name="JavaScript"><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * URLからクエリパラメータを取得します。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">getUrlQuery</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">url</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">object</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getUrlQuery</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> query = url.<span class="title function_">substring</span>(url.<span class="title function_">indexOf</span>(<span class="string">&#x27;?&#x27;</span>) + <span class="number">1</span>).<span class="title function_">split</span>(<span class="string">&#x27;&amp;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> params = &#123;&#125;;</span><br><span class="line">  query.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> key_value = item.<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>);</span><br><span class="line">    params[key_value[<span class="number">0</span>]] = key_value[<span class="number">1</span>];</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> params;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> url = <span class="string">&#x27;https://www.test.com/query?a=1&amp;b=2&amp;c=3&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getUrlQuery</span>(url)); <span class="comment">// &#123; a: 1, b: 2, c: 3 &#125;</span></span><br></pre></td></tr></table></figure></blog-tab-panel><blog-tab-panel name="TypeScript"><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * URLからクエリパラメータを取得します。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">getUrlQuery</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">url</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">object</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getUrlQuery</span>(<span class="params"><span class="attr">url</span>: <span class="built_in">string</span></span>): <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">query</span>: <span class="built_in">string</span>[] = url.<span class="title function_">substring</span>(url.<span class="title function_">indexOf</span>(<span class="string">&#x27;?&#x27;</span>) + <span class="number">1</span>).<span class="title function_">split</span>(<span class="string">&#x27;&amp;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">params</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; = &#123;&#125;;</span><br><span class="line">  query.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">key_value</span>: <span class="built_in">string</span>[] = item.<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>);</span><br><span class="line">    params[key_value[<span class="number">0</span>]] = key_value[<span class="number">1</span>];</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> params;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">url</span>: <span class="built_in">string</span> = <span class="string">&#x27;https://www.test.com/query?a=1&amp;b=2&amp;c=3&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getUrlQuery</span>(url)); <span class="comment">// &#123; a: 1, b: 2, c: 3 &#125;</span></span><br></pre></td></tr></table></figure></blog-tab-panel></blog-tabs><ul><li><h4 id="setUrlQuery"><a href="#setUrlQuery" class="headerlink" title="setUrlQuery"></a>setUrlQuery</h4></li></ul><blog-tabs><blog-tab-panel name="JavaScript"><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * オブジェクト形式をパスパラメータに変換します。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">setUrlQuery</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">object</span>&#125; <span class="variable">params</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">setUrlQuery</span>(<span class="params">params</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> querys = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> params) &#123;</span><br><span class="line">    <span class="keyword">if</span> (params.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">      querys.<span class="title function_">push</span>(key + <span class="string">&#x27;=&#x27;</span> + params[key]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> querys.<span class="title function_">join</span>(<span class="string">&#x27;&amp;&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> params = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">setUrlQuery</span>(params)); <span class="comment">// &#x27;a=1&amp;b=2&amp;c=3&#x27;</span></span><br></pre></td></tr></table></figure></blog-tab-panel><blog-tab-panel name="TypeScript"><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * オブジェクト形式をパスパラメータに変換します。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">setUrlQuery</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">object</span>&#125; <span class="variable">params</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">setUrlQuery</span>(<span class="params"><span class="attr">params</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">querys</span>: <span class="built_in">string</span>[] = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> params) &#123;</span><br><span class="line">    <span class="keyword">if</span> (params.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">      querys.<span class="title function_">push</span>(key + <span class="string">&#x27;=&#x27;</span> + params[key]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> querys.<span class="title function_">join</span>(<span class="string">&#x27;&amp;&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">params</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt; = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">setUrlQuery</span>(params)); <span class="comment">// &#x27;a=1&amp;b=2&amp;c=3&#x27;</span></span><br></pre></td></tr></table></figure></blog-tab-panel></blog-tabs><ul><li><h4 id="getDeepValueOfObject"><a href="#getDeepValueOfObject" class="headerlink" title="getDeepValueOfObject"></a>getDeepValueOfObject</h4></li></ul><blog-tabs><blog-tab-panel name="JavaScript"><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * オブジェクトの深い値を取得します。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">getDeepValueOfObject</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">object|array</span>&#125; <span class="variable">object</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">keyPath</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">any</span>&#125; [defaultValue]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">any</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getDeepValueOfObject</span>(<span class="params">object, keyPath, defaultValue</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> isString = <span class="keyword">typeof</span> keyPath === <span class="string">&#x27;string&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span> (!isString) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;[getDeepValueOfObject warn]: keyPath is not a string, type &#x27;</span> + <span class="keyword">typeof</span> keyPath);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (object &amp;&amp; keyPath &amp;&amp; isString) &#123;</span><br><span class="line">    <span class="keyword">const</span> keys = keyPath.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> value = object;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; keys.<span class="property">length</span>; index++) &#123;</span><br><span class="line">      <span class="keyword">const</span> key = keys[index];</span><br><span class="line">      <span class="keyword">if</span> (value[key] !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">        value = value[key];</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        value = defaultValue;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> defaultValue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">foo</span>: &#123;</span><br><span class="line">    <span class="attr">number</span>: <span class="number">3</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">bar</span>: <span class="number">2</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> arr = [ obj ];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getDeepValueOfObject</span>(obj, <span class="string">&#x27;foo.number&#x27;</span>)); <span class="comment">// 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getDeepValueOfObject</span>(obj, <span class="string">&#x27;bar.number&#x27;</span>)); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getDeepValueOfObject</span>(obj, <span class="string">&#x27;bar.number&#x27;</span>, <span class="string">&#x27;default&#x27;</span>)); <span class="comment">// &#x27;default&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getDeepValueOfObject</span>(obj, <span class="string">&#x27;&#x27;</span>)); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getDeepValueOfObject</span>(obj, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;default&#x27;</span>)); <span class="comment">// &#x27;default&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getDeepValueOfObject</span>(arr, <span class="number">0</span>)); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getDeepValueOfObject</span>(arr, <span class="string">&#x27;0.foo.number&#x27;</span>)); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></blog-tab-panel><blog-tab-panel name="TypeScript"><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * オブジェクトの深い値を取得します。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">getDeepValueOfObject</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">object|array</span>&#125; <span class="variable">object</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">keyPath</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">any</span>&#125; [defaultValue]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">any</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> getDeepValueOfObject&lt;T&gt;(<span class="attr">object</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;, <span class="attr">keyPath</span>: <span class="built_in">string</span>, <span class="attr">defaultValue</span>?: T): T | <span class="built_in">any</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">isString</span>: <span class="built_in">boolean</span> = <span class="keyword">typeof</span> keyPath === <span class="string">&#x27;string&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span> (!isString) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;[getDeepValueOfObject warn]: keyPath is not a string, type &#x27;</span> + <span class="keyword">typeof</span> keyPath);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">object</span> &amp;&amp; keyPath &amp;&amp; isString) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">keys</span>: <span class="built_in">string</span>[] = keyPath.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">value</span>: <span class="built_in">any</span> = <span class="built_in">object</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; keys.<span class="property">length</span>; index++) &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="attr">key</span>: <span class="built_in">string</span> = keys[index];</span><br><span class="line">      <span class="keyword">if</span> (value[key] !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">        value = value[key];</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        value = defaultValue;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> defaultValue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">foo</span>: &#123;</span><br><span class="line">    <span class="attr">number</span>: <span class="number">3</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">bar</span>: <span class="number">2</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> arr = [ obj ];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getDeepValueOfObject</span>(obj, <span class="string">&#x27;foo.number&#x27;</span>)); <span class="comment">// 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getDeepValueOfObject</span>(obj, <span class="string">&#x27;bar.number&#x27;</span>)); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getDeepValueOfObject</span>(obj, <span class="string">&#x27;bar.number&#x27;</span>, <span class="string">&#x27;default&#x27;</span>)); <span class="comment">// &#x27;default&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getDeepValueOfObject</span>(obj, <span class="string">&#x27;&#x27;</span>)); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getDeepValueOfObject</span>(obj, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;default&#x27;</span>)); <span class="comment">// &#x27;default&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getDeepValueOfObject</span>(arr, <span class="number">0</span>)); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getDeepValueOfObject</span>(arr, <span class="string">&#x27;0.foo.number&#x27;</span>)); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></blog-tab-panel></blog-tabs><ul><li><h4 id="toThousands"><a href="#toThousands" class="headerlink" title="toThousands"></a>toThousands</h4></li></ul><blog-tabs><blog-tab-panel name="JavaScript"><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数値を千の区切り形式に変換します。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">toThousands</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number|string</span>&#125; <span class="variable">number</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">toThousands</span>(<span class="params">number</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="title class_">Number</span>(number)) &gt;= <span class="number">1000</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [integer, float] = (number || <span class="number">0</span>).<span class="title function_">toString</span>().<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> thousandsInteger = integer.<span class="title function_">replace</span>(<span class="regexp">/(\d)(?=(?:\d&#123;3&#125;)+$)/g</span>, <span class="string">&#x27;$1,&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> thousandsInteger + (float ? <span class="string">&#x27;.&#x27;</span> + float : <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> number;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blog-tab-panel><blog-tab-panel name="TypeScript"><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数値を千の区切り形式に変換します。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> <span class="variable">toThousands</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number|string</span>&#125; <span class="variable">number</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">toThousands</span>(<span class="params"><span class="attr">number</span>: <span class="built_in">number</span> | <span class="built_in">string</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="title class_">Number</span>(<span class="built_in">number</span>)) &gt;= <span class="number">1000</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [integer, float]: <span class="built_in">string</span>[] = (<span class="built_in">number</span> || <span class="number">0</span>).<span class="title function_">toString</span>().<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">thousandsInteger</span>: <span class="built_in">string</span> = integer.<span class="title function_">replace</span>(<span class="regexp">/(\d)(?=(?:\d&#123;3&#125;)+$)/g</span>, <span class="string">&#x27;$1,&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> thousandsInteger + (float ? <span class="string">&#x27;.&#x27;</span> + float : <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">String</span>(<span class="built_in">number</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blog-tab-panel></blog-tabs><ul><li><h4 id="hyperscript"><a href="#hyperscript" class="headerlink" title="hyperscript"></a>hyperscript</h4></li></ul><blog-tabs><blog-tab-panel name="JavaScript"><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> w = <span class="variable language_">window</span>;</span><br><span class="line"><span class="keyword">var</span> <span class="variable language_">document</span> = w.<span class="property">document</span>;</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Text</span> = w.<span class="property">Text</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">h</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> e = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">item</span>(<span class="params">l</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> r;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">parseClass</span>(<span class="params">string</span>) &#123;</span><br><span class="line">      <span class="comment">// 私たちの最小限のパーサーは、`#`のようなCSSの特殊文字のエスケープを理解しません。</span></span><br><span class="line">      <span class="comment">// それらを使用しないでください。詳細はこちら：</span></span><br><span class="line">      <span class="comment">// https://mathiasbynens.be/notes/css-escapes 。</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> m = string.<span class="title function_">split</span>(<span class="regexp">/([\.#]?[^\s#.]+)/</span>);</span><br><span class="line">      <span class="keyword">if</span> (<span class="regexp">/^\.|#/</span>.<span class="title function_">test</span>(m[<span class="number">1</span>])) e = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">      <span class="title function_">forEach</span>(m, <span class="keyword">function</span> (<span class="params">v</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> s = v.<span class="title function_">substring</span>(<span class="number">1</span>, v.<span class="property">length</span>);</span><br><span class="line">        <span class="keyword">if</span> (!v) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (!e) e = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(v);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (v[<span class="number">0</span>] === <span class="string">&#x27;.&#x27;</span>) e.<span class="property">classList</span>.<span class="title function_">add</span>(s);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (v[<span class="number">0</span>] === <span class="string">&#x27;#&#x27;</span>) e.<span class="title function_">setAttribute</span>(<span class="string">&#x27;id&#x27;</span>, s);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (l == <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&#x27;string&#x27;</span> === <span class="keyword">typeof</span> l) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!e) <span class="title function_">parseClass</span>(l);</span><br><span class="line">      <span class="keyword">else</span> e.<span class="title function_">appendChild</span>((r = <span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(l)));</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span><br><span class="line">      <span class="string">&#x27;number&#x27;</span> === <span class="keyword">typeof</span> l ||</span><br><span class="line">      <span class="string">&#x27;boolean&#x27;</span> === <span class="keyword">typeof</span> l ||</span><br><span class="line">      l <span class="keyword">instanceof</span> <span class="title class_">Date</span> ||</span><br><span class="line">      l <span class="keyword">instanceof</span> <span class="title class_">RegExp</span></span><br><span class="line">    ) &#123;</span><br><span class="line">      e.<span class="title function_">appendChild</span>((r = <span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(l.<span class="title function_">toString</span>())));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//これを処理するより良い方法があるかもしれません...</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">isArray</span>(l)) <span class="title function_">forEach</span>(l, item);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">isNode</span>(l)) e.<span class="title function_">appendChild</span>((r = l));</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (l <span class="keyword">instanceof</span> <span class="title class_">Text</span>) e.<span class="title function_">appendChild</span>((r = l));</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&#x27;object&#x27;</span> === <span class="keyword">typeof</span> l) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> l) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&#x27;function&#x27;</span> === <span class="keyword">typeof</span> l[k]) &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="regexp">/^on\w+/</span>.<span class="title function_">test</span>(k)) &#123;</span><br><span class="line">            (<span class="keyword">function</span> (<span class="params">k, l</span>) &#123;</span><br><span class="line">              <span class="comment">// クロージャ内でk、lをキャプチャ</span></span><br><span class="line">              <span class="keyword">if</span> (e.<span class="property">addEventListener</span>) &#123;</span><br><span class="line">                e.<span class="title function_">addEventListener</span>(k.<span class="title function_">substring</span>(<span class="number">2</span>), l[k], <span class="literal">false</span>);</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                e.<span class="title function_">attachEvent</span>(k, l[k]);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)(k, l);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// オブザーバブル</span></span><br><span class="line">            e[k] = l[k]();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (k === <span class="string">&#x27;style&#x27;</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="string">&#x27;string&#x27;</span> === <span class="keyword">typeof</span> l[k]) &#123;</span><br><span class="line">            e.<span class="property">style</span>.<span class="property">cssText</span> = l[k];</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> s <span class="keyword">in</span> l[k])</span><br><span class="line">              (<span class="keyword">function</span> (<span class="params">s, v</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="string">&#x27;function&#x27;</span> === <span class="keyword">typeof</span> v) &#123;</span><br><span class="line">                  <span class="comment">// オブザーバブル</span></span><br><span class="line">                  e.<span class="property">style</span>.<span class="title function_">setProperty</span>(s, <span class="title function_">v</span>());</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">var</span> match = l[k][s].<span class="title function_">match</span>(<span class="regexp">/(.*)\W+!important\W*$/</span>);</span><br><span class="line">                <span class="keyword">if</span> (match) &#123;</span><br><span class="line">                  e.<span class="property">style</span>.<span class="title function_">setProperty</span>(s, match[<span class="number">1</span>], <span class="string">&#x27;important&#x27;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  e.<span class="property">style</span>.<span class="title function_">setProperty</span>(s, l[k][s]);</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;)(s, l[k][s]);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (k === <span class="string">&#x27;attrs&#x27;</span>) &#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">var</span> v <span class="keyword">in</span> l[k]) &#123;</span><br><span class="line">            e.<span class="title function_">setAttribute</span>(v, l[k][v]);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (k.<span class="title function_">substr</span>(<span class="number">0</span>, <span class="number">5</span>) === <span class="string">&#x27;data-&#x27;</span>) &#123;</span><br><span class="line">          e.<span class="title function_">setAttribute</span>(k, l[k]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          e[k] = l[k];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&#x27;function&#x27;</span> === <span class="keyword">typeof</span> l) &#123;</span><br><span class="line">      <span class="comment">//オブザーバブルであると仮定します！</span></span><br><span class="line">      <span class="keyword">var</span> v = <span class="title function_">l</span>();</span><br><span class="line">      e.<span class="title function_">appendChild</span>((r = <span class="title function_">isNode</span>(v) ? v : <span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(v)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (args.<span class="property">length</span>) <span class="title function_">item</span>(args.<span class="title function_">shift</span>());</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> e;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isNode</span>(<span class="params">el</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> el &amp;&amp; el.<span class="property">nodeName</span> &amp;&amp; el.<span class="property">nodeType</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">forEach</span>(<span class="params">arr, fn</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (arr.<span class="property">forEach</span>) <span class="keyword">return</span> arr.<span class="title function_">forEach</span>(fn);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) <span class="title function_">fn</span>(arr[i], i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isArray</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(arr) == <span class="string">&#x27;[object Array]&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blog-tab-panel><blog-tab-panel name="TypeScript"><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">HyperElementTagNameMap</span> <span class="keyword">extends</span> <span class="title class_">HTMLElementTagNameMap</span> &#123;</span><br><span class="line">  [<span class="attr">customTagName</span>: <span class="string">`<span class="subst">$&#123;<span class="built_in">string</span>&#125;</span>-<span class="subst">$&#123;<span class="built_in">string</span>&#125;</span>`</span>]: <span class="title class_">HTMLElement</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">CSSStyleAttributes</span> &#123;</span><br><span class="line">  <span class="attr">style</span>?: <span class="built_in">string</span> | <span class="title class_">Partial</span>&lt;<span class="title class_">CSSStyleDeclaration</span>&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> hyperscript&lt;T <span class="keyword">extends</span> keyof <span class="title class_">HyperElementTagNameMap</span>&gt;(</span><br><span class="line">  <span class="attr">tagName</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">attributes</span>?: (<span class="title class_">CSSStyleAttributes</span> &amp; <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">unknown</span>&gt; &amp; <span class="title class_">Partial</span>&lt;<span class="title class_">GlobalEventHandlers</span>&gt;) | <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">children</span>?: <span class="built_in">string</span> | <span class="title class_">HTMLElement</span> | <span class="title class_">ChildNode</span> | (<span class="title class_">HTMLElement</span> | <span class="title class_">ChildNode</span>)[]</span><br><span class="line">): <span class="title class_">HyperElementTagNameMap</span>[T] &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">tagNameWithCssSelectorArr</span>: <span class="built_in">string</span>[] = tagName.<span class="title function_">split</span>(<span class="regexp">/(?=[.#])/</span>);</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">pureTagName</span>: <span class="built_in">string</span> = tagNameWithCssSelectorArr.<span class="title function_">shift</span>();</span><br><span class="line">  <span class="keyword">const</span> element = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(pureTagName) <span class="keyword">as</span> <span class="title class_">HyperElementTagNameMap</span>[T];</span><br><span class="line">  tagNameWithCssSelectorArr.<span class="title function_">forEach</span>(<span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">selectorName</span>: <span class="built_in">string</span> = item.<span class="title function_">substring</span>(<span class="number">1</span>, item.<span class="property">length</span>);</span><br><span class="line">    <span class="keyword">if</span> (item[<span class="number">0</span>] === <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">      element.<span class="property">classList</span>.<span class="title function_">add</span>(selectorName);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (item[<span class="number">0</span>] === <span class="string">&#x27;#&#x27;</span>) &#123;</span><br><span class="line">      element.<span class="title function_">setAttribute</span>(<span class="string">&#x27;id&#x27;</span>, selectorName);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">if</span> (attributes) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> attributeName <span class="keyword">in</span> attributes) &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="attr">attributeValue</span>: <span class="built_in">unknown</span> = attributes[attributeName];</span><br><span class="line">      <span class="keyword">if</span> (attributeName === <span class="string">&#x27;style&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> attributeValue === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">          element.<span class="property">style</span>.<span class="property">cssText</span> = attributeValue;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (attributeValue <span class="keyword">instanceof</span> <span class="title class_">CSSStyleDeclaration</span>) &#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">const</span> styleName <span class="keyword">in</span> attributeValue) &#123;</span><br><span class="line">            element.<span class="property">style</span>.<span class="title function_">setProperty</span>(styleName, attributeValue[styleName]);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/on[a-zA-Z]+/</span>.<span class="title function_">test</span>(attributeName) &amp;&amp; <span class="keyword">typeof</span> attributeValue === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (element.<span class="property">addEventListener</span>) &#123;</span><br><span class="line">          element.<span class="title function_">addEventListener</span>(</span><br><span class="line">            attributeName.<span class="title function_">substring</span>(<span class="number">2</span>).<span class="title function_">toLocaleLowerCase</span>(),</span><br><span class="line">            attributeValue <span class="title function_">as</span> (<span class="attr">event</span>: <span class="title class_">Event</span>) =&gt; <span class="built_in">void</span>,</span><br><span class="line">            <span class="literal">false</span></span><br><span class="line">          );</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (attributeName === <span class="string">&#x27;attrs&#x27;</span> &amp;&amp; <span class="keyword">typeof</span> attributeValue === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> attributeValue) &#123;</span><br><span class="line">          <span class="title function_">setAttribute</span>(element, key, attributeValue[key]);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (attributeName.<span class="title function_">substr</span>(<span class="number">0</span>, <span class="number">5</span>) === <span class="string">&#x27;data-&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_">setAttribute</span>(element, attributeName, attributeValue);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        element[attributeName] = attributeValue;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (children) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> children === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> child = <span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(children);</span><br><span class="line">      <span class="title function_">appendChild</span>(element, child);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (children <span class="keyword">instanceof</span> <span class="title class_">Array</span>) &#123;</span><br><span class="line">      children.<span class="title function_">forEach</span>(<span class="function"><span class="params">child</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">appendChild</span>(element, child);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">appendChild</span>(element, children);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setAttribute</span>(<span class="params"><span class="attr">element</span>: <span class="title class_">HTMLElement</span>, <span class="attr">attributeName</span>: <span class="built_in">string</span>, <span class="attr">attributeValue</span>: <span class="built_in">unknown</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (<span class="keyword">typeof</span> attributeValue) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;number&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;boolean&#x27;</span>:</span><br><span class="line">      element.<span class="title function_">setAttribute</span>(attributeName, attributeValue.<span class="title function_">toString</span>());</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;string&#x27;</span>:</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      element.<span class="title function_">setAttribute</span>(attributeName, attributeValue <span class="keyword">as</span> <span class="built_in">string</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">appendChild</span>(<span class="params"><span class="attr">parent</span>: <span class="title class_">HTMLElement</span>, <span class="attr">child</span>: <span class="title class_">HTMLElement</span> | <span class="title class_">ChildNode</span> | <span class="title class_">Text</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (parent.<span class="property">tagName</span>.<span class="title function_">toLocaleLowerCase</span>() === <span class="string">&#x27;template&#x27;</span>) &#123;</span><br><span class="line">    (parent <span class="keyword">as</span> <span class="title class_">HTMLTemplateElement</span>).<span class="property">content</span>.<span class="title function_">appendChild</span>(child);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    parent.<span class="title function_">appendChild</span>(child);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></blog-tab-panel></blog-tabs></div><div class="comment-divider"></div><script src="https://giscus.app/client.js" data-lang="ja" data-repo="liuzane&#x2F;liuzane.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkyMTY3ODEyNDM&#x3D;" data-category="Announcements" data-category-id="DIC_kwDODOvRu84CwfsS" data-mapping="title" data-strict="1" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="preferred_color_scheme" crossorigin="anonymous" async></script></article></section><footer id="footer" class="frosted-glass"><div class="footer-wrapper"><a href="/" class="footer-title">柳葉刀とコードのブログ</a><p>この小さな世界は私が作り上げたものだ。</p></div></footer></div></div><script src="/js/i18n.js"></script><script src="/web-components/utils/style-manger.js"></script><script src="/web-components/blog-base.js"></script><script src="/web-components/blog-tabs.js"></script><script src="/web-components/blog-tab-panel.js"></script></div></body></html>