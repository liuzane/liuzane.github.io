<!doctype html><html lang="en"><head><meta charset="utf-8"><title>RegExp</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="google-site-verification" content="7if7tEoBzofIpEcyTBbXYj68Uwni_Udf_J_RnIMKkx0"><link rel="alternate" href="https://liuzane.github.io/en" hreflang="en"><link rel="alternate" href="https://liuzane.github.io/zh" hreflang="zh"><link rel="alternate" href="https://liuzane.github.io/ja" hreflang="ja"><link rel="alternate" href="https://liuzane.github.io" hreflang="x-default"><link rel="canonical" href="https://liuzane.github.io/ja/2019/10/22/regexp.html"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/article.css"></head><body><div id="container"><div id="nav"><nav id="nav-wrap"><a class="nav-link" href="/ja">ホーム</a> <a class="nav-link" href="/ja/archives">アーカイブ</a> <a class="nav-link" href="/ja/categories">カテゴリ</a> <a class="nav-link" href="https://liuzane.github.io/tools" target="_blank">ツール</a> <a class="nav-link" href="https://liuzane.github.io/laboratory" target="_blank">ラボ</a> <a class="nav-link" href="/ja/about">紹介</a></nav><div class="frosted-glass"></div></div><div id="nav-lang"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="2em" height="2em"><path d="M512 742.4a230.4 230.4 0 1 0 0-460.8 230.4 230.4 0 0 0 0 460.8z m0 57.6a288 288 0 1 1 0-576 288 288 0 0 1 0 576zM380.256 267.2l25.664-13.984c0-0.8-0.032-0.832 4.832 3.2 25.6 26.976 38.368 49.92 38.368 68.8 0 5.312 0.192 10.08 0.736 19.776 1.792 31.232 1.376 43.04-5.664 58.88-10.848 24.544-34.176 36.544-67.072 36.544-27.456 0-49.696 6.464-88.96 23.296-30.4 13.024-33.28 14.208-45.952 18.432l10.592-41.728c10.432-3.456-15.68-17.504 12.704-29.664 45.888-19.648 74.336-27.936 111.616-27.936 7.392 0 12-0.896 14.208-2.048 1.92-4.128 2.24-11.712 1.024-32.512-0.64-10.752-0.832-16.288-0.832-23.04 0-8.256-16.48-23.552-17.632-24.512-16.8-13.984 6.4-12.832 6.4-33.504z m225.312 325.728c-24.896-13.632-41.024-28.512-48.896-52.096-2.656-8-8.832-13.952-20.128-19.712-5.248-2.656-24.832-10.624-27.776-12.032-15.68-7.52-25.568-16.544-25.568-34.944 0-16.224 0.864-27.68 4.512-41.856 5.952-23.008 17.92-42.144 37.824-54.592 17.664-11.04 36.288-12.128 56.832-5.92 6.848 2.048 13.568 4.736 22.784 8.864-0.928-0.448 16.96 7.68 22.24 9.984 12.736 5.472 23.808 9.408 35.584 12.352a205.216 205.216 0 0 0 101.248 0l13.952 55.904a262.784 262.784 0 0 1-129.152 0 283.04 283.04 0 0 1-44.416-15.36c-47.584-20.48-44.448-19.52-48.544-16.96-8.896 5.568-13.312 16.864-14.72 33.792 6.784 2.848 16.416 6.944 21.344 9.44 23.584 12 40.448 28.32 48.64 52.832 2.208 6.592 8.544 12.48 21.888 19.776 3.2 1.76 17.12 8.832 20.64 10.752 26.528 14.624 40.512 33.184 28.736 61.6-9.152 22.08-25.088 32.928-54.72 44.576-0.96 0.384-19.648 7.488-25.152 9.76-9.28 3.808-17.024 7.488-24.224 11.648a137.6 137.6 0 0 0-7.328 4.544c-19.904 13.28-30.368 37.728-30.368 76.864h-57.6c0-56.896 18.336-99.648 56-124.8 3.424-2.24 6.88-4.384 10.432-6.432a248.64 248.64 0 0 1 31.232-15.136c6.304-2.56 25.568-9.92 25.92-10.048a168.32 168.32 0 0 0 12.768-5.504 1102.944 1102.944 0 0 1-13.984-7.296z" p-id="1465"></path></svg></div><div id="nav-lang-list"><a class="lang-link" href="/en/2019/10/22/regexp.html" hreflang="en">English</a> <a class="lang-link" href="/zh/2019/10/22/regexp.html" hreflang="zh">简体中文</a> <a class="lang-link" href="/ja/2019/10/22/regexp.html" hreflang="ja">日本語</a></div><div id="wrapper"><header id="header"><div class="header-wrapper"><img src="/images/aodamiao.jpg" class="header-avatar"><p class="header-author">柳政</p><p class="header-description">日々精進、向上心を忘れず</p></div><div class="frosted-glass"></div></header><section id="content"><article class="article"><a class="article-back" href="javascript: history.back(-1)">&lt; 戻る</a><header class="article-header"><h1 class="article-title">RegExp</h1><div class="article-meta"><time datetime="2019-10-22T08:57:39.000Z" class="article-date">2019-10-22</time></div></header><div class="article-content"><h2 id="JavaScript-RegExp-オブジェクト"><a href="#JavaScript-RegExp-オブジェクト" class="headerlink" title="JavaScript RegExp オブジェクト"></a>JavaScript RegExp オブジェクト</h2><h4 id="構文"><a href="#構文" class="headerlink" title="構文"></a>構文</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> regexp = <span class="keyword">new</span> <span class="title class_">RegExp</span>(pattern, modifiers);    <span class="comment">// 通过 RegExp 构造函数创建</span></span><br><span class="line"><span class="keyword">var</span> regexp = <span class="regexp">/[pattern]/</span>[modifiers];            <span class="comment">// 通过字面量创建</span></span><br></pre></td></tr></table></figure><blockquote><ul><li>pattern（パターン）は式のパターンを記述します</li><li>modifiers（修飾子）はグローバルマッチ、大小文字の区別、複数行マッチを指定します</li></ul><p>注意：コンストラクタで正規表現オブジェクトを作成する場合、通常の文字エスケープルール（バックスラッシュ \ を前に付ける）が必要です。例えば、次は等価です：</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> regexp = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;\\w+&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> regexp = <span class="regexp">/\w+/</span>;</span><br></pre></td></tr></table></figure><h4 id="修飾子"><a href="#修飾子" class="headerlink" title="修飾子"></a>修飾子</h4><blockquote><p>修飾子（Modifiers）はグローバルマッチ、大小文字の区別、複数行マッチを指定します：</p></blockquote><table><thead><tr><th>修飾子</th><th>説明</th></tr></thead><tbody><tr><td>i</td><td>大小文字を区別しないマッチを実行します。</td></tr><tr><td>g</td><td>グローバルマッチ（すべての一致を検索、最初の一致で停止しない）を実行します。</td></tr><tr><td>m</td><td>複数行マッチを実行します。</td></tr><tr><td>s</td><td>. で改行文字もマッチできるようにします。</td></tr><tr><td>u</td><td>unicode コードのパターンでマッチします。</td></tr><tr><td>y</td><td>“粘着（sticky）”検索を実行し、ターゲット文字列の現在位置からマッチします。</td></tr></tbody></table><h4 id="量指定子"><a href="#量指定子" class="headerlink" title="量指定子"></a>量指定子</h4><blockquote><p>量指定子（Quantifiers）は繰り返しマッチする文字の回数や範囲を定義します：</p></blockquote><table><thead><tr><th>量指定子</th><th>説明</th></tr></thead><tbody><tr><td>n+</td><td>少なくとも1つの n を含む文字列にマッチします。</td></tr><tr><td>n*</td><td>0個以上の n を含む文字列にマッチします。</td></tr><tr><td>n?</td><td>0個または1個の n を含む文字列にマッチします。</td></tr><tr><td>n{X}</td><td>X 個の n の並びにマッチします。</td></tr><tr><td>n{X,}</td><td>最低 x 個、最大 y 個の n の並びにマッチします。</td></tr><tr><td>n{X,Y}</td><td>少なくとも x 個の n の並びにマッチします。</td></tr><tr><td>^n</td><td>n で始まる文字列にマッチします。</td></tr><tr><td>n$</td><td>n で終わる文字列にマッチします。</td></tr><tr><td>?=n</td><td>直後に指定文字列 n が続く場合にマッチします。</td></tr><tr><td>?!n</td><td>直後に指定文字列 n が続かない場合にマッチします。</td></tr></tbody></table><h4 id="メタ文字"><a href="#メタ文字" class="headerlink" title="メタ文字"></a>メタ文字</h4><blockquote><p>メタ文字（Metacharacter）は特別な意味を持つ文字です：</p></blockquote><table><thead><tr><th>メタ文字</th><th>説明</th></tr></thead><tbody><tr><td>.</td><td>（ドット）デフォルトで<strong><em>改行以外</em></strong>の任意の1文字にマッチします。</td></tr><tr><td>\w</td><td>単語文字（数字、英字、アンダースコア）にマッチします。</td></tr><tr><td>\W</td><td>非単語文字にマッチします。</td></tr><tr><td>\d</td><td>数字にマッチします。</td></tr><tr><td>\D</td><td>非数字文字にマッチします。</td></tr><tr><td>\s</td><td>空白文字にマッチします。</td></tr><tr><td>\S</td><td>非空白文字にマッチします。</td></tr><tr><td>\b</td><td>単語境界にマッチします。</td></tr><tr><td>\B</td><td>非単語境界にマッチします。</td></tr><tr><td>\0</td><td>NULL 文字にマッチします。</td></tr><tr><td>\n</td><td>改行文字にマッチします。</td></tr><tr><td>\f</td><td>改ページ文字にマッチします。</td></tr><tr><td>\r</td><td>復帰文字にマッチします。</td></tr><tr><td>\t</td><td>タブ文字にマッチします。</td></tr><tr><td>\v</td><td>垂直タブにマッチします。</td></tr><tr><td>\xxx</td><td>8進数 xxx で指定された文字にマッチします。</td></tr><tr><td>\xdd</td><td>16進数 dd で指定された文字にマッチします。</td></tr><tr><td>\uxxxx</td><td>16進数 xxxx で指定された Unicode 文字にマッチします。</td></tr></tbody></table><h4 id="角括弧"><a href="#角括弧" class="headerlink" title="角括弧"></a>角括弧</h4><blockquote><p>角括弧は特定の範囲の文字を検索するために使います：</p></blockquote><table><thead><tr><th>式</th><th>説明</th></tr></thead><tbody><tr><td>[^]</td><td>任意の文字にマッチします。（<strong><em>改行もマッチ可能</em></strong>）</td></tr><tr><td>[abc]</td><td>角括弧内の任意の文字にマッチします。</td></tr><tr><td>[^abc]</td><td>角括弧内にない任意の文字にマッチします。</td></tr><tr><td>[0-9]</td><td>0 から 9 までの任意の数字にマッチします。</td></tr><tr><td>[a-z]</td><td>小文字 a から小文字 z までの任意の文字にマッチします。</td></tr><tr><td>[A-Z]</td><td>大文字 A から大文字 Z までの任意の文字にマッチします。</td></tr><tr><td>[A-z]</td><td>大文字 A から小文字 z までの任意の文字にマッチします。</td></tr><tr><td>(red|blue|green)</td><td>指定されたいずれかの選択肢にマッチします。</td></tr></tbody></table><h4 id="RegExp-オブジェクトのメソッド"><a href="#RegExp-オブジェクトのメソッド" class="headerlink" title="RegExp オブジェクトのメソッド"></a>RegExp オブジェクトのメソッド</h4><table><thead><tr><th>式</th><th>説明</th></tr></thead><tbody><tr><td>compile</td><td>正規表現をコンパイルします。</td></tr><tr><td>exec</td><td>文字列内で指定値を検索します。見つかった値とその位置を返します。</td></tr><tr><td>test</td><td>文字列内で指定値を検索します。true または false を返します。</td></tr></tbody></table><h4 id="正規表現をサポートする-String-オブジェクトのメソッド"><a href="#正規表現をサポートする-String-オブジェクトのメソッド" class="headerlink" title="正規表現をサポートする String オブジェクトのメソッド"></a>正規表現をサポートする String オブジェクトのメソッド</h4><table><thead><tr><th>式</th><th>説明</th></tr></thead><tbody><tr><td>search</td><td>正規表現に一致する値を検索します。</td></tr><tr><td>match</td><td>1つまたは複数の正規表現の一致を見つけます。</td></tr><tr><td>replace</td><td>正規表現に一致する部分文字列を置換します。</td></tr><tr><td>split</td><td>文字列を配列に分割します。</td></tr></tbody></table><h4 id="複数行テキストで正規表現を使う"><a href="#複数行テキストで正規表現を使う" class="headerlink" title="複数行テキストで正規表現を使う"></a>複数行テキストで正規表現を使う</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> string = <span class="string">&#x27;Please yes\nmake my day!&#x27;</span>;</span><br><span class="line"></span><br><span class="line">string.<span class="title function_">match</span>(<span class="regexp">/yes.*day/</span>); <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line">string.<span class="title function_">match</span>(<span class="regexp">/yes[^]*day/</span>); <span class="comment">// &#x27;yes\nmake my day&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="先読みアサーションと否定先読みアサーション"><a href="#先読みアサーションと否定先読みアサーション" class="headerlink" title="先読みアサーションと否定先読みアサーション"></a>先読みアサーションと否定先読みアサーション</h4><blockquote><p>先読みアサーション（lookahead）は、xがyの前にある場合のみマッチします。/x(?=y)/ のように書きます。例えば、パーセント記号の前の数字だけをマッチさせるには /\d+(?=%)/ と書きます。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> string = <span class="string">&#x27;100% of US presidents have been male&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="regexp">/\d+(?=%)/</span>.<span class="title function_">exec</span>(string); <span class="comment">// [&#x27;100&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="regexp">/have(?=%)/</span>.<span class="title function_">exec</span>(string); <span class="comment">// null</span></span><br></pre></td></tr></table></figure><blockquote><p>否定先読みアサーション（negative lookahead）は、xがyの前にない場合のみマッチします。/x(?!y)/ のように書きます。例えば、パーセント記号の前でない数字だけをマッチさせるには /\d+(?!%)/ と書きます。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> string = <span class="string">&#x27;that&#x27;</span>s all <span class="number">44</span> <span class="keyword">of</span> them<span class="string">&#x27;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/\d+(?!%)/.exec(string); // [&#x27;</span><span class="number">44</span><span class="string">&#x27;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/\d+(?!.*of)/.exec(string); // null</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/\d+(?!.*all)/.exec(string); // [&#x27;</span><span class="number">44</span><span class="string">&#x27;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/\d+(?!.*of|.*all)/.exec(string); // null</span></span><br></pre></td></tr></table></figure><h4 id="後読みアサーションと否定後読みアサーション"><a href="#後読みアサーションと否定後読みアサーション" class="headerlink" title="後読みアサーションと否定後読みアサーション"></a>後読みアサーションと否定後読みアサーション</h4><blockquote><p>ES2018 で後読みアサーションが導入され、V8 エンジン 4.9（Chrome 62）以降でサポートされています。<br>後読みアサーション（lookbehind）は、xがyの後にある場合のみマッチします。/(?&lt;=y)x/ のように書きます。例えば、ドル記号の後の数字だけをマッチさせるには /(?&lt;=$)d+/ と書きます。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> string = <span class="string">&#x27;Benjamin Franklin is on the $100 bill&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="regexp">/(?&lt;=\$)\d+/</span>.<span class="title function_">exec</span>(string);  <span class="comment">// [&quot;100&quot;]</span></span><br></pre></td></tr></table></figure><blockquote><p>否定後読みアサーション（negative lookbehind）は、xがyの後にない場合のみマッチします。/(?&lt;!y)x/ のように書きます。例えば、ドル記号の後でない数字だけをマッチさせるには /(?&lt;!\$)d+/ と書きます。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> string = <span class="string">&#x27;it&#x27;</span>s is worth about €<span class="number">90</span><span class="string">&#x27;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/(?&lt;!\$)\d+/.exec(string);  // [&quot;90&quot;]</span></span><br></pre></td></tr></table></figure><h4 id="貪欲モードと非貪欲モード"><a href="#貪欲モードと非貪欲モード" class="headerlink" title="貪欲モードと非貪欲モード"></a>貪欲モードと非貪欲モード</h4><blockquote><p>貪欲モード: 正規表現は通常、できるだけ長くマッチしようとします。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> html = <span class="string">&#x27;&lt;html&gt;&lt;head&gt;&lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> regexp = <span class="regexp">/(&lt;.*&gt;)/</span>;</span><br><span class="line"></span><br><span class="line">html.<span class="title function_">match</span>(regexp); <span class="comment">// [&#x27;&lt;html&gt;&lt;head&gt;&lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;&#x27;]</span></span><br></pre></td></tr></table></figure><blockquote><p>非貪欲モード: 最小限のマッチを試みます。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> html = <span class="string">&#x27;&lt;html&gt;&lt;head&gt;&lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> regexp = <span class="regexp">/(&lt;.*?&gt;)/</span>;</span><br><span class="line"></span><br><span class="line">html.<span class="title function_">match</span>(regexp); <span class="comment">// [&#x27;&lt;html&gt;&#x27;]</span></span><br></pre></td></tr></table></figure><blockquote><p>6種類の繰り返しの非貪欲マッチの簡単な説明：</p><ul><li>{n,m}?：できるだけ n 回マッチしますが、条件を満たすために最大 m 回まで繰り返すこともあります。</li><li>{n}?：できるだけ n 回マッチします。</li><li>{n,}?：できるだけ n 回マッチしますが、条件を満たすために任意回数繰り返すこともあります。</li><li>??：できるだけマッチしますが、条件を満たすために最大1回までマッチします（{0,1}? と同等）。</li><li>+?：できるだけ1回マッチしますが、条件を満たすために任意回数繰り返すこともあります（{1,}? と同等）。</li><li>*? ：できるだけマッチしませんが、条件を満たすために任意回数繰り返すこともあります（{0,}? と同等）。</li></ul></blockquote><h4 id="キャプチャグループと非キャプチャグループ"><a href="#キャプチャグループと非キャプチャグループ" class="headerlink" title="キャプチャグループと非キャプチャグループ"></a>キャプチャグループと非キャプチャグループ</h4><blockquote><p>キャプチャグループ ()：キャプチャグループは各グループでマッチした内容を一時的に保存し、次回利用できます。JavaScript では $1, $2, $3… の形式で保存されます。そのためキャプチャグループはパフォーマンスに影響します。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> string = <span class="string">&#x27;sjds24324abcabc1234&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> regexp = <span class="regexp">/(abc)&#123;2&#125;/</span>;</span><br><span class="line"></span><br><span class="line">string.<span class="title function_">match</span>(regexp); <span class="comment">// [&#x27;abcabc&#x27;, &#x27;abc&#x27;]</span></span><br></pre></td></tr></table></figure><blockquote><p>非キャプチャグループ (?:)：非キャプチャグループは各グループのマッチ内容を保存せず、結果のみ返します。したがってマッチ速度が向上します。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> string = <span class="string">&#x27;sjds24324abcabc1234&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> regexp = <span class="regexp">/(?:abc)&#123;2&#125;/</span>;</span><br><span class="line"></span><br><span class="line">string.<span class="title function_">match</span>(regexp); <span class="comment">// [&#x27;abcabc&#x27;]</span></span><br></pre></td></tr></table></figure><h4 id="正規表現の名前付きグループキャプチャ"><a href="#正規表現の名前付きグループキャプチャ" class="headerlink" title="正規表現の名前付きグループキャプチャ"></a>正規表現の名前付きグループキャプチャ</h4><blockquote><p>名前付きグループキャプチャは ?<name>記法を使い、マッチした結果を名前でアクセスできます。グループがマッチしなかった場合、groups オブジェクトの該当プロパティは undefined になります。</name></p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> date = <span class="string">&#x27;2023-01-01&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> regexp = <span class="regexp">/(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;day&gt;\d&#123;2&#125;)/u</span>;</span><br><span class="line"></span><br><span class="line">regexp.<span class="title function_">exec</span>(<span class="string">&#x27;2023-01-01&#x27;</span>); <span class="comment">// &#123; year: &#x27;2023&#x27;, month: &#x27;01&#x27;, day: &#x27;01&#x27; &#125;</span></span><br></pre></td></tr></table></figure></div></article></section><footer id="footer"><div class="footer-wrapper"><a href="/" class="footer-title">柳政のブログ</a><p>テーマは Lite から</p></div><div class="frosted-glass"></div></footer></div></div><script src="/js/i18n.js"></script></body></html>