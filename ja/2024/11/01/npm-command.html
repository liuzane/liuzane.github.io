<!doctype html><html lang="ja"><head><meta charset="utf-8"><title>NPM 更新パケットコマンドです</title><meta name="author" content="柳葉刀とコード"><meta name="keywords" content="npm, node.js,依存関係管理,パッケージ管理,npm-check,postinstall error,node-pre-gyp, installation error, dependency update"><meta name="description" content="一般的な依存関係管理コマンド、npm-checkを使用して更新をチェックする方法、一般的なインストールエラー(postinstallエラーやnode-pre-gypエラーなど)の解決策を含むnpmコマンドの使用法ガイド。"><meta name="robots" content="index, follow"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="alternate" href="https://liuzane.github.io/en" hreflang="en"><link rel="alternate" href="https://liuzane.github.io/zh" hreflang="zh"><link rel="alternate" href="https://liuzane.github.io/ja" hreflang="ja"><link rel="alternate" href="https://liuzane.github.io" hreflang="x-default"><link rel="canonical" href="https://liuzane.github.io/ja/2024/11/01/npm-command.html"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/article.css"></head><body><div id="container"><div id="nav" class="frosted-glass fade-in"><nav id="nav-wrap"><a class="nav-link" href="/ja">ホーム</a> <a class="nav-link" href="/ja/archives">アーカイブ</a> <a class="nav-link" href="/ja/categories">カテゴリ</a> <a class="nav-link" href="/ja/works">作品</a> <a class="nav-link" href="/ja/about">紹介</a></nav><div id="nav-lang"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="970" width="1.2rem" height="1.2rem"><path d="M1011.712 399.9744A512.1536 512.1536 0 0 0 512 0C229.2224 0 0 229.2224 0 512c0 282.7264 229.2224 512 512 512s512-229.2736 512-512c0-38.4512-4.2496-75.9808-12.288-112.0256zM94.976 512c0-52.1216 9.5744-101.9392 27.0336-147.968 22.1184 12.544 51.8656 14.848 51.8656 39.7824 0 82.432 3.072 170.8032 82.1248 172.1856 2.2528 0 44.032 15.0528 64 64 6.8608 16.896 34.1504 0 64 0 14.8992 0 0 23.808 0 75.264 0 51.3536 116.6848 130.304 116.6848 130.304-0.512 33.9456 0.9216 61.44 3.8912 83.3536a417.024 417.024 0 0 1-409.6-416.9216z m518.144 404.6336c16.4352-66.4064 24.4224-103.5776 58.7776-131.7888 49.664-40.8576 5.888-86.2208-31.8976-80.896-29.7984 4.3008-10.9568-34.9696-37.5808-37.12-26.624-2.0992-61.2864-52.224-99.584-69.4784-20.2752-9.1648-40.2432-33.6384-71.5264-34.7136-27.7504-1.024-68.2496 22.2208-68.2496 4.3008 0-57.7024-6.144-98.9184-7.424-115.3536-1.024-13.2096-9.1136-4.4544 28.3648-3.584 20.3776 0.512 10.4448-38.8608 30.6176-40.3968 19.8656-1.4848 67.072 17.6128 79.1552 9.984 11.2128-7.0656 82.2272 176.7936 82.2272 30.4128 0-17.408-9.472-47.616 0-64 37.5296-65.024 72.704-117.9648 69.5296-125.7472-1.792-4.352-38.4-7.936-67.6864 1.3824-9.8816 3.072 3.1232 17.7664-11.0592 20.9408-53.1968 11.6224-100.1984-13.6192-83.7632-37.376 16.896-24.2688 77.9264-10.5472 83.3024-59.3408 3.072-27.904 5.632-60.2624 7.3216-84.3264a417.536 417.536 0 0 1 326.4 259.584c-141.9776 103.424-105.6256 175.616-58.9824 216.8832 24.576 21.7088 47.9232 54.3744 63.1808 77.824a417.8944 417.8944 0 0 1-291.1232 262.8096z" p-id="971"></path></svg></div><div id="nav-lang-list" class="hidden"><a class="lang-link" href="/en/2024/11/01/npm-command.html" hreflang="en">English</a> <a class="lang-link" href="/zh/2024/11/01/npm-command.html" hreflang="zh">简体中文</a> <a class="lang-link" href="/ja/2024/11/01/npm-command.html" hreflang="ja">日本語</a></div></div><div id="scroller" class="fade-in"><div id="wrapper"><header id="header" class="frosted-glass"><div class="header-wrapper"><img src="/images/aodamiao.jpg" alt="柳葉刀とコード" class="header-avatar"><p class="header-author">柳葉刀とコード</p><p class="header-description">日々精進、向上心を忘れず</p></div></header><section id="content"><article class="article"><a class="article-back" href="javascript: history.back(-1)">&lt; 戻る</a><header class="article-header"><h1 class="article-title">NPM 更新パケットコマンドです</h1><div class="article-meta"><time datetime="2024-11-01T07:03:00.000Z" class="article-date">2024-11-01</time></div></header><div class="article-content"><h3 id="NPMコマンド"><a href="#NPMコマンド" class="headerlink" title="NPMコマンド"></a>NPMコマンド</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">更新可能な依存ライブラリを確認</span></span><br><span class="line">npm outdated</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">依存ライブラリxxxの最新バージョン情報を確認</span></span><br><span class="line">npm view xxx versions</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">または</span></span><br><span class="line">npm info xxx</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">xxxの1.0.0バージョンをdependenciesにインストール（@latestは最新版を意味）</span></span><br><span class="line">npm install xxx@1.0.0 --save</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">省略形</span></span><br><span class="line">npm i xxx@1.0.0 -S</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">xxxを最新バージョンに更新しdevDependenciesに保存</span></span><br><span class="line">npm update xxx --save-dev</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">依存ライブラリの全ツリーを表示（依存ライブラリの依存関係を含む）</span></span><br><span class="line">npm list</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">package.jsonに登録された依存ライブラリのみ表示（devDependenciesを含む）</span></span><br><span class="line">npm list --depth=0</span><br></pre></td></tr></table></figure><h3 id="npm-checkで依存ライブラリの更新を確認"><a href="#npm-checkで依存ライブラリの更新を確認" class="headerlink" title="npm-checkで依存ライブラリの更新を確認"></a>npm-checkで依存ライブラリの更新を確認</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install -g npm-check  # まずnpm-checkをグローバルインストール</span><br><span class="line">npm-check -u              # 現在のプロジェクトのパッケージ更新を確認</span><br><span class="line">npm-check -u -g           # グローバルインストール済みパッケージの更新を確認</span><br></pre></td></tr></table></figure><blockquote><p><code>npm-check -u</code>は全ての更新を表示します。矢印キーで移動、スペースキーで選択・解除、選択後エンターキーを押してください。</p></blockquote><h3 id="NPMインストールエラーの解決方法"><a href="#NPMインストールエラーの解決方法" class="headerlink" title="NPMインストールエラーの解決方法"></a>NPMインストールエラーの解決方法</h3><p><strong><text color="#f00">postinstall error:</text></strong></p><table><thead><tr><th>環境</th><th>バージョン</th></tr></thead><tbody><tr><td>windows</td><td>10</td></tr><tr><td>node</td><td>20.14.0</td></tr><tr><td>pnpm</td><td>9.4.0</td></tr></tbody></table><p>初めて <code>pnpm install</code> または <code>npm install</code> を実行すると、PNPMが次のエラーを報告します：npm postinstall failed command not found node .&#x2F;scripts&#x2F;postinstall.js<br><img src="/images/notes/npm-command/2024-11-01-150359.png" alt=" "></p><p><strong><text color="#4aad2a">解決策1:</text></strong><br>コマンドを実行します<br><code>rimraf .\node_modules\</code><br><code>npm cache clean --force</code><br><code>pnpm store prune</code></p><p><strong><text color="#4aad2a">解決策2:</text></strong></p><ol><li><p>エラーが発生したプラグインの package.json ファイルを見つけます</p></li><li><p>package.json の scripts.postinstall のコマンドをどこかにメモし、コマンドを <code>pnpm --version</code> に変更します</p></li><li><p>その後、一度 <code>pnpm install</code> を実行すると、エラーのあったプラグインの postinstall が正常に実行されます</p></li><li><p>エラーが発生したプラグインの package.json ファイルのディレクトリにそれぞれ移動します</p></li><li><p>それぞれのプラグインで元の postinstall コマンドを実行します</p></li><li><p><code>pnpm dev</code> で正常に起動できます。。。</p></li></ol><h3 id="NPM-Install-Error-Solution"><a href="#NPM-Install-Error-Solution" class="headerlink" title="NPM Install Error Solution"></a>NPM Install Error Solution</h3><p><strong><text color="#f00">node-pre-gyp error:</text></strong></p><table><thead><tr><th>プラグイン</th><th>バージョン</th></tr></thead><tbody><tr><td>linux</td><td>13.6.0</td></tr><tr><td>node</td><td>18.20.4</td></tr><tr><td>npm</td><td>10.7.0</td></tr></tbody></table><p>初めて <code>npm install</code> を実行すると、npm error node-pre-gyp が発生することがあります。<br><img src="/images/notes/npm-command/2024-11-01-154318.png" alt=" "></p><p><strong><text color="#f3b235">原因:</text></strong><br><a target="_blank" rel="noopener" href="https://github.com/mozilla/pdf.js#user-content-getting-the-code">https://github.com/mozilla/pdf.js#user-content-getting-the-code</a></p><blockquote><p>On MacOS M1&#x2F;M2 you may see some node-gyp-related errors when running npm install. This is because one of our dependencies, “canvas”, does not provide pre-built binaries for this platform and instead npm will try to build it from source. Please make sure to first install the necessary native dependencies using brew: <a target="_blank" rel="noopener" href="https://github.com/Automattic/node-canvas#compiling">https://github.com/Automattic/node-canvas#compiling</a>.</p></blockquote><p><strong><text color="#4aad2a">解決策:</text></strong></p><ol><li><p><a target="_blank" rel="noopener" href="https://github.com/Automattic/node-canvas#compiling">https://github.com/Automattic/node-canvas#compiling</a> の解決方法を参考にし、環境に画像プラグインのサポートを追加します。</p></li><li><p>プロジェクト内の canvas（パッケージ名: node-canvas）関連のすべてのプラグインを削除します。</p></li></ol></div><div class="comment-divider"></div><script src="https://giscus.app/client.js" data-lang="ja" data-repo="liuzane&#x2F;liuzane.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkyMTY3ODEyNDM&#x3D;" data-category="Announcements" data-category-id="DIC_kwDODOvRu84CwfsS" data-mapping="title" data-strict="1" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="preferred_color_scheme" crossorigin="anonymous" async></script></article></section><footer id="footer" class="frosted-glass"><div class="footer-wrapper"><a href="/" class="footer-title">柳葉刀とコードのブログ</a><p>この小さな世界は私が作り上げたものだ。</p></div></footer></div></div><script src="/js/i18n.js"></script></div></body></html>