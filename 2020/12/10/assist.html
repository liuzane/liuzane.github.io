<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Assist - LiuZheng&#39;s Blog</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="google-site-verification" content="7if7tEoBzofIpEcyTBbXYj68Uwni_Udf_J_RnIMKkx0"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/article.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="container"><div id="nav"><nav id="nav-wrap"><a class="nav-link" href="/">Home</a> <a class="nav-link" href="/archives">Archives</a> <a class="nav-link" href="/categories">Categories</a> <a class="nav-link" href="https://liuzane.github.io/tools">Tools</a> <a class="nav-link" href="/about">About</a></nav><div class="frosted-glass"></div></div><div id="wrapper"><header id="header"><div class="header-wrapper"><img src="/images/aodamiao.jpg" class="header-avatar"><p class="header-author">Zheng Liu</p><p class="header-description">Study hard and make progress every day</p></div><div class="frosted-glass"></div></header><section id="content"><article class="article"><a class="article-back" href="javascript: history.back(-1)">&lt; Back</a><header class="article-header"><h1 class="article-title">Assist</h1><div class="article-meta"><time datetime="2024-05-16T10:35:00.000Z" class="article-date">2024-05-16</time></div></header><div class="article-content"><h4 id="方法集合："><a href="#方法集合：" class="headerlink" title="方法集合："></a>方法集合：</h4><table><thead><tr><th>方法名称</th><th>描述</th></tr></thead><tbody><tr><td><a href="#typeOf-anything">typeOf</a></td><td>验证数据类型。</td></tr><tr><td><a href="#deepCopy-data">deepCopy</a></td><td>深拷贝。</td></tr><tr><td><a href="#uuid">uuid</a></td><td>生成 UUID。</td></tr><tr><td><a href="#download-url-name">download</a></td><td>下载。</td></tr><tr><td><a href="#getUrlArg-name">getUrlArg</a></td><td>根据名称获取路径参数。</td></tr><tr><td><a href="#getUrlQuery-name">getUrlQuery</a></td><td>将路径参数转化为对象格式。</td></tr><tr><td><a href="#setUrlQuery-url">setUrlQuery</a></td><td>将对象格式转化为路径参数。</td></tr><tr><td><a href="#getDeepValueOfObject-object-keyPath-defaultValue">getDeepValueOfObject</a></td><td>获取对象深层值。</td></tr><tr><td><a href="#toThousands-number">toThousands</a></td><td>转化为千位分隔符格式。</td></tr></tbody></table><ul><li><h4 id="typeOf-anything"><a href="#typeOf-anything" class="headerlink" title="typeOf(anything)"></a>typeOf(anything)</h4><p>验证数据类型。</p><blockquote><p>返回值均为字符串</p></blockquote><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enum</span> TypeValue &#123;</span><br><span class="line">  <span class="built_in">Boolean</span> = <span class="string">&#x27;boolean&#x27;</span>,</span><br><span class="line">  <span class="built_in">Number</span> = <span class="string">&#x27;number&#x27;</span>,</span><br><span class="line">  <span class="built_in">String</span> = <span class="string">&#x27;string&#x27;</span>,</span><br><span class="line">  <span class="built_in">Function</span> = <span class="string">&#x27;function&#x27;</span>,</span><br><span class="line">  <span class="built_in">Array</span> = <span class="string">&#x27;array&#x27;</span>,</span><br><span class="line">  <span class="built_in">Date</span> = <span class="string">&#x27;date&#x27;</span>,</span><br><span class="line">  <span class="built_in">RegExp</span> = <span class="string">&#x27;regexp&#x27;</span>,</span><br><span class="line">  Undefined = <span class="string">&#x27;undefined&#x27;</span>,</span><br><span class="line">  Null = <span class="string">&#x27;null&#x27;</span>,</span><br><span class="line">  <span class="built_in">Object</span> = <span class="string">&#x27;object&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TypeMap: Record&lt;<span class="built_in">string</span>, TypeValue&gt; = &#123;</span><br><span class="line">  <span class="string">&#x27;[object Boolean]&#x27;</span>: TypeValue.Boolean, </span><br><span class="line">  <span class="string">&#x27;[object Number]&#x27;</span>: TypeValue.Number,</span><br><span class="line">  <span class="string">&#x27;[object String]&#x27;</span>: TypeValue.String,</span><br><span class="line">  <span class="string">&#x27;[object Function]&#x27;</span>: TypeValue.Function,</span><br><span class="line">  <span class="string">&#x27;[object Array]&#x27;</span>: TypeValue.Array,</span><br><span class="line">  <span class="string">&#x27;[object Date]&#x27;</span>: TypeValue.Date,</span><br><span class="line">  <span class="string">&#x27;[object RegExp]&#x27;</span>: TypeValue.RegExp,</span><br><span class="line">  <span class="string">&#x27;[object Undefined]&#x27;</span>: TypeValue.Undefined,</span><br><span class="line">  <span class="string">&#x27;[object Null]&#x27;</span>: TypeValue.Null,</span><br><span class="line">  <span class="string">&#x27;[object Object]&#x27;</span>: TypeValue.Object</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Validate data type.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method <span class="variable">typeOf</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> <span class="variable">obj</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">typeOf</span>(<span class="params">obj: unknown</span>): <span class="title">TypeValue</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> toString = <span class="built_in">Object</span>.prototype.toString;</span><br><span class="line">  <span class="keyword">return</span> TypeMap[toString.call(obj)];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(typeOf(<span class="string">&#x27;abc&#x27;</span>)); <span class="comment">// string</span></span><br><span class="line"><span class="built_in">console</span>.log(typeOf([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])); <span class="comment">// array</span></span><br><span class="line"><span class="built_in">console</span>.log(typeOf(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;)); <span class="comment">// object</span></span><br></pre></td></tr></table></figure></li><li><h4 id="deepCopy-data"><a href="#deepCopy-data" class="headerlink" title="deepCopy(data)"></a>deepCopy(data)</h4><p>深拷贝。</p><blockquote><p>该方法需要结合 <code>typeOf()</code> 方法一起使用</p></blockquote><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Data deep copy.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method <span class="variable">deepCopy</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;array|object&#125;</span> <span class="variable">data</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;array|object&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>&lt;<span class="title">T</span>&gt;(<span class="params">data: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">type</span>: TypeValue = typeOf(data);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> (<span class="keyword">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> TypeValue.Array: &#123;</span><br><span class="line">      <span class="keyword">const</span> array: unknown[] = [];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; (data <span class="keyword">as</span> unknown[]).length; index++) &#123;</span><br><span class="line">        array.push(deepCopy(data[index]));</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> array <span class="keyword">as</span> T;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> TypeValue.Object: &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="built_in">object</span>: Record&lt;<span class="built_in">string</span>, unknown&gt; = &#123;&#125;;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.hasOwnProperty.call(data, key)) &#123;</span><br><span class="line">          <span class="built_in">object</span>[key] = deepCopy(data[key]);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">object</span> <span class="keyword">as</span> T;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = deepCopy(obj1);</span><br><span class="line"><span class="built_in">console</span>.log(obj1 === obj2); <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li><li><h4 id="formatDate-date-format"><a href="#formatDate-date-format" class="headerlink" title="formatDate(date, format)"></a>formatDate(date, format)</h4><p>日期格式化。</p><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Time and date formatting.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method <span class="variable">formatDate</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string|date&#125;</span> <span class="variable">time</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">formatDate</span>(<span class="params">time: <span class="built_in">string</span> | <span class="built_in">Date</span>, format = <span class="string">&#x27;yyyy-MM-dd hh:mm:ss&#x27;</span></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> date: <span class="built_in">Date</span> = time ? <span class="keyword">new</span> <span class="built_in">Date</span>(time) : <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  <span class="keyword">const</span> dateValues: Record&lt;<span class="built_in">string</span>, <span class="built_in">number</span>&gt; = &#123;</span><br><span class="line">    <span class="string">&#x27;M+&#x27;</span>: date.getMonth() + <span class="number">1</span>, <span class="comment">// 月</span></span><br><span class="line">    <span class="string">&#x27;d+&#x27;</span>: date.getDate(), <span class="comment">// 日</span></span><br><span class="line">    <span class="string">&#x27;h+&#x27;</span>: date.getHours(), <span class="comment">// 时</span></span><br><span class="line">    <span class="string">&#x27;m+&#x27;</span>: date.getMinutes(), <span class="comment">// 分</span></span><br><span class="line">    <span class="string">&#x27;s+&#x27;</span>: date.getSeconds(), <span class="comment">// 秒</span></span><br><span class="line">    <span class="string">&#x27;q+&#x27;</span>: <span class="built_in">Math</span>.floor((date.getMonth() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">// 季度</span></span><br><span class="line">    <span class="string">&#x27;S&#x27;</span>: date.getMilliseconds() <span class="comment">// 毫秒</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="regexp">/(y&#123;4&#125;)/</span>.test(format)) &#123;</span><br><span class="line">    format = format.replace(<span class="built_in">RegExp</span>.$1, (date.getFullYear() + <span class="string">&#x27;&#x27;</span>).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$1.length));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> dateValues) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&#x27;(&#x27;</span> + key + <span class="string">&#x27;)&#x27;</span>).test(format)) &#123;</span><br><span class="line">      <span class="keyword">const</span> value = dateValues[key].toString();</span><br><span class="line">      format = format.replace(<span class="built_in">RegExp</span>.$1, (<span class="built_in">RegExp</span>.$1.length === <span class="number">1</span>) ? value : (<span class="string">&#x27;00&#x27;</span> + value).substr(value.length));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> format;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(formatDate(<span class="string">&#x27;2024-05-01&#x27;</span>)); <span class="comment">// &#x27;2024-05-01 00:00:00&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(formatDate(<span class="string">&#x27;2024-05-01&#x27;</span>, <span class="string">&#x27;yyyy-MM-dd&#x27;</span>)); <span class="comment">// &#x27;2024-05-01&#x27;</span></span><br></pre></td></tr></table></figure></li><li><h4 id="uuid"><a href="#uuid" class="headerlink" title="uuid()"></a>uuid()</h4><p>生成 UUID。</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method <span class="variable">uuid</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uuid</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&#x27;</span>.replace(<span class="regexp">/[xy]/g</span>, <span class="function"><span class="keyword">function</span> (<span class="params">c</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> r = <span class="built_in">Math</span>.random() * <span class="number">16</span> | <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> v = c === <span class="string">&#x27;x&#x27;</span> ? r : (r &amp; <span class="number">0x3</span> | <span class="number">0x8</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> v.toString(<span class="number">16</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(uuid()); <span class="comment">// xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</span></span><br></pre></td></tr></table></figure></li><li><h4 id="download-url-name"><a href="#download-url-name" class="headerlink" title="download(url, name)"></a>download(url, name)</h4><p>下载。</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method <span class="variable">download</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">url</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">name</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">download</span>(<span class="params">url, name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> aDom = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">  aDom.download = name;</span><br><span class="line">  aDom.href = url;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(aDom);</span><br><span class="line">  aDom.click();</span><br><span class="line">  aDom.remove();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(download(<span class="string">&#x27;word.docx&#x27;</span>, <span class="string">&#x27;https://www.test.com/word.docx&#x27;</span>)); <span class="comment">// word.docx</span></span><br></pre></td></tr></table></figure></li><li><h4 id="getUrlArg-name"><a href="#getUrlArg-name" class="headerlink" title="getUrlArg(name)"></a>getUrlArg(name)</h4><p>根据名称获取路径参数。</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method <span class="variable">getUrlArg</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">name</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUrlArg</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> search = <span class="built_in">window</span>.location.search;</span><br><span class="line">  <span class="keyword">const</span> regexp = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">`(^|&amp;)<span class="subst">$&#123;name&#125;</span>=([^&amp;]*)(&amp;|$)`</span>);</span><br><span class="line">  <span class="keyword">const</span> arg = search.substr(<span class="number">1</span>).match(regexp);</span><br><span class="line">  <span class="keyword">return</span> arg ? arg[<span class="number">2</span>] : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h4 id="getUrlQuery-url"><a href="#getUrlQuery-url" class="headerlink" title="getUrlQuery(url)"></a>getUrlQuery(url)</h4><p>将路径参数转化为对象格式。</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method <span class="variable">getUrlQuery</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">url</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;object&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUrlQuery</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> query = url.substring(url.indexOf(<span class="string">&#x27;?&#x27;</span>) + <span class="number">1</span>).split(<span class="string">&#x27;&amp;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> params = &#123;&#125;;</span><br><span class="line">  query.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> key_value = item.split(<span class="string">&#x27;=&#x27;</span>);</span><br><span class="line">    params[key_value[<span class="number">0</span>]] = key_value[<span class="number">1</span>];</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> params;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> url = <span class="string">&#x27;https://www.test.com/query?a=1&amp;b=2&amp;c=3&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(getUrlQuery(url)); <span class="comment">// &#123; a: 1, b: 2, c: 3 &#125;</span></span><br></pre></td></tr></table></figure></li><li><h4 id="setUrlQuery-url"><a href="#setUrlQuery-url" class="headerlink" title="setUrlQuery(url)"></a>setUrlQuery(url)</h4><p>将对象格式转化为路径参数。</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method <span class="variable">setUrlQuery</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;object&#125;</span> <span class="variable">params</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setUrlQuery</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> querys = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> params) &#123;</span><br><span class="line">    <span class="keyword">if</span> (params.hasOwnProperty(key)) &#123;</span><br><span class="line">      querys.push(key + <span class="string">&#x27;=&#x27;</span> + params[key]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> querys.join(<span class="string">&#x27;&amp;&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> params = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(setUrlQuery(params)); <span class="comment">// &#x27;a=1&amp;b=2&amp;c=3&#x27;</span></span><br></pre></td></tr></table></figure></li><li><h4 id="getDeepValueOfObject-object-keyPath-defaultValue"><a href="#getDeepValueOfObject-object-keyPath-defaultValue" class="headerlink" title="getDeepValueOfObject(object, keyPath, defaultValue)"></a>getDeepValueOfObject(object, keyPath, defaultValue)</h4><p>获取对象深层值。</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method <span class="variable">getDeepValueOfObject</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;object|array&#125;</span> <span class="variable">object</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">keyPath</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>[defaultValue]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;any&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDeepValueOfObject</span>(<span class="params">object, keyPath, defaultValue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> isString = <span class="keyword">typeof</span> keyPath === <span class="string">&#x27;string&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span> (!isString) &#123;</span><br><span class="line">    <span class="built_in">console</span>.warn(<span class="string">&#x27;[getDeepValueOfObject warn]: keyPath is not a string, type &#x27;</span> + <span class="keyword">typeof</span> keyPath);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (object &amp;&amp; keyPath &amp;&amp; isString) &#123;</span><br><span class="line">    <span class="keyword">const</span> keys = keyPath.split(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> value = object;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; keys.length; index++) &#123;</span><br><span class="line">      <span class="keyword">const</span> key = keys[index];</span><br><span class="line">      <span class="keyword">if</span> (value[key] !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">        value = value[key];</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        value = defaultValue;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> defaultValue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">foo</span>: &#123;</span><br><span class="line">    <span class="attr">number</span>: <span class="number">3</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">bar</span>: <span class="number">2</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> arr = [ obj ];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getDeepValueOfObject(obj, <span class="string">&#x27;foo.number&#x27;</span>)); <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(getDeepValueOfObject(obj, <span class="string">&#x27;bar.number&#x27;</span>)); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(getDeepValueOfObject(obj, <span class="string">&#x27;bar.number&#x27;</span>, <span class="string">&#x27;default&#x27;</span>)); <span class="comment">// &#x27;default&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(getDeepValueOfObject(obj, <span class="string">&#x27;&#x27;</span>)); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(getDeepValueOfObject(obj, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;default&#x27;</span>)); <span class="comment">// &#x27;default&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(getDeepValueOfObject(arr, <span class="number">0</span>)); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(getDeepValueOfObject(arr, <span class="string">&#x27;0.foo.number&#x27;</span>)); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></li><li><h4 id="toThousands-number"><a href="#toThousands-number" class="headerlink" title="toThousands(number)"></a>toThousands(number)</h4><p>转化为千位分隔符格式</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method <span class="variable">toThousands</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number|string&#125;</span> <span class="variable">number</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toThousands</span>(<span class="params">number</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(<span class="built_in">Number</span>(number)) &gt;= <span class="number">1000</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [integer, float] = (number || <span class="number">0</span>).toString().split(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> thousandsInteger = integer.replace(<span class="regexp">/(\d)(?=(?:\d&#123;3&#125;)+$)/g</span>, <span class="string">&#x27;$1,&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> thousandsInteger + (float ? <span class="string">&#x27;.&#x27;</span> + float : <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> number;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></div></article></section><footer id="footer"><div class="footer-wrapper"><a href="/" class="footer-title">LiuZheng's Blog</a><p>Theme from by Lite</p></div><div class="frosted-glass"></div></footer></div></div></body></html>