<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Cookies - LiuZheng&#39;s Blog</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="google-site-verification" content="7if7tEoBzofIpEcyTBbXYj68Uwni_Udf_J_RnIMKkx0"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/article.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="container"><div id="nav"><nav id="nav-wrap"><a class="nav-link" href="/">Home</a> <a class="nav-link" href="/archives">Archives</a> <a class="nav-link" href="/categories">Categories</a> <a class="nav-link" href="https://liuzane.github.io/tools">Tools</a> <a class="nav-link" href="/about">About</a></nav><div class="frosted-glass"></div></div><div id="wrapper"><header id="header"><div class="header-wrapper"><img src="/images/aodamiao.jpg" class="header-avatar"><p class="header-author">Zheng Liu</p><p class="header-description">Study hard and make progress every day</p></div><div class="frosted-glass"></div></header><section id="content"><article class="article"><a class="article-back" href="javascript: history.back(-1)">&lt; Back</a><header class="article-header"><h1 class="article-title">Cookies</h1><div class="article-meta"><time datetime="2020-12-10T09:53:41.000Z" class="article-date">2020-12-10</time></div></header><div class="article-content"><ul><li><h4 id="setCookie-params"><a href="#setCookie-params" class="headerlink" title="setCookie(params)"></a>setCookie(params)</h4><p>设置Cookie</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@method <span class="variable">setCookie</span></span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;object&#125;</span> <span class="variable">options</span></span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>options.key</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>options.value</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;number&#125;</span> </span>[options.hours]</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>[options.path]   - path: &#x27;/&#x27;</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>[options.domain] - domain: document.domain</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>(), expires = <span class="string">&#x27;&#x27;</span>, path = <span class="string">&#x27;&#x27;</span>, domain = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!options.key || !options.value) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">&#x27;[Cookie Error]: key, value must be set.&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (options.hours) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="built_in">Number</span>(options.hours);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="built_in">console</span>.error(<span class="string">&#x27;[Cookie Error]: expires must is number.&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    time.toGMTString(time.setTime(time.getTime() + <span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * options.hours));</span><br><span class="line">    expires = <span class="string">&#x27;expires=&#x27;</span> + time + <span class="string">&#x27;;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (options.path) path = <span class="string">&#x27;path=&#x27;</span> + options.path + <span class="string">&#x27;;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (options.domain) domain = <span class="string">&#x27;domain=&#x27;</span> + options.domain;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">document</span>.cookie = options.key + <span class="string">&#x27;=&#x27;</span> + options.value + <span class="string">&#x27;;&#x27;</span> + expires + path + domain;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h4 id="getCookie-key"><a href="#getCookie-key" class="headerlink" title="getCookie(key)"></a>getCookie(key)</h4><p>获取Cookie</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@method <span class="variable">getCookie</span></span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>key </span></span><br><span class="line"><span class="comment">* <span class="doctag">@return <span class="type">&#123;undefined|string|null&#125;</span></span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!key) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">&#x27;[Cookie Error]: key is &#x27;</span> + (<span class="keyword">typeof</span> key) + <span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> regexp = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&#x27;(^|; )&#x27;</span> + key + <span class="string">&#x27;=.*?(;|$)&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> result = <span class="built_in">document</span>.cookie.match(regexp);</span><br><span class="line">  <span class="keyword">const</span> value = result ? result[<span class="number">0</span>].replace(<span class="regexp">/[; ]/g</span>, <span class="string">&#x27;&#x27;</span>).split(<span class="string">&#x27;=&#x27;</span>)[<span class="number">1</span>] : <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h4 id="deleteCookie-param"><a href="#deleteCookie-param" class="headerlink" title="deleteCookie(param)"></a>deleteCookie(param)</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@method <span class="variable">deleteCookie</span></span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;string|object&#125;</span> <span class="variable">param</span></span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>param.key</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>[param.path]</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>[param.domain]</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return <span class="type">&#123;undefined|string|null&#125;</span></span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteCookie</span>(<span class="params">param</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> options = <span class="keyword">typeof</span> param === <span class="string">&#x27;object&#x27;</span> ? param : &#123;&#125;;</span><br><span class="line">  <span class="keyword">const</span> key = <span class="keyword">typeof</span> param === <span class="string">&#x27;string&#x27;</span> ? param : options.key;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!key) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">&#x27;[Cookie Error]: key is &#x27;</span> + (<span class="keyword">typeof</span> key) + <span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (options.path) path = <span class="string">&#x27;path=&#x27;</span> + options.path + <span class="string">&#x27;;&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span> (options.domain) domain = <span class="string">&#x27;domain=&#x27;</span> + options.domain + <span class="string">&#x27;;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> regexp = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&#x27;(^|; )&#x27;</span> + key + <span class="string">&#x27;=.*?(;|$)&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> result = <span class="built_in">document</span>.cookie.match(regexp);</span><br><span class="line">  <span class="keyword">const</span> item = result ? result[<span class="number">0</span>].replace(<span class="regexp">/[; ]/g</span>, <span class="string">&#x27;&#x27;</span>) : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  time.toGMTString(time.setTime(<span class="number">0</span>));</span><br><span class="line">  <span class="built_in">document</span>.cookie = item + <span class="string">&#x27;;expires=&#x27;</span> + time + <span class="string">&#x27;;&#x27;</span> + options.path + options.domain;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h4 id="clearCookie-params"><a href="#clearCookie-params" class="headerlink" title="clearCookie(params)"></a>clearCookie(params)</h4><p>清除Cookie</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@method <span class="variable">clearCookie</span></span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;object&#125;</span> </span>[options]</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>[options.path]</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>[options.domain]</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clearCookie</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> arr = <span class="built_in">document</span>.cookie.split(<span class="string">&#x27;;&#x27;</span>), path = <span class="string">&#x27;&#x27;</span>, domain = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!options) options = &#123;&#125;;</span><br><span class="line">  <span class="keyword">if</span> (options.path) path = <span class="string">&#x27;path=&#x27;</span> + options.path + <span class="string">&#x27;;&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span> (options.domain) domain = <span class="string">&#x27;domain=&#x27;</span> + options.domain + <span class="string">&#x27;;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> key = arr[i].substring(<span class="number">0</span>, arr[i].indexOf(<span class="string">&#x27;=&#x27;</span>));</span><br><span class="line">    <span class="built_in">document</span>.cookie = key + <span class="string">&#x27;=0;expires=Thu, 01 Jan 1970 00:00:00 GMT;&#x27;</span> + path + domain;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></div></article></section><footer id="footer"><div class="footer-wrapper"><a href="/" class="footer-title">LiuZheng's Blog</a><p>Theme from by Lite</p></div><div class="frosted-glass"></div></footer></div></div></body></html>