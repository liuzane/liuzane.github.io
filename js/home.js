"use strict";var inputElement,loadingElement,contentElement,loading=!0,loadingText="loading",time=null,searchInstance=null;function handleInput(e){loading?(clearInterval(time),loadingElement.innerText=loadingText,loadingElement.style.display="block",contentElement.style.display="none",time=setInterval(function(){loadingElement.innerText.length>=10?loadingElement.innerText=loadingText:loadingElement.innerText+=".",loading||(clearInterval(time),loadingElement.style.display="none",contentElement.style.display="block",renderSearchResult(e))},500)):(clearTimeout(time),time=setTimeout(function(){renderSearchResult(e)},300))}function judgeTextAttr(e){return void 0!==e.textContent?"textContent":"innerText"}function renderSearchResult(e){contentElement.innerHTML="";var t=e||window.event,n=t.target||t.srcElement;if(n.value.replace(/(^\s*)|(\s*$)/g,"")){var a=searchInstance.search(n.value);if(a.length>0){var l=document.createElement("ul");l.className="home-search-wrap";for(var r=0;r<a.length;r++){var o=a[r],i=document.createElement("li");i.className="home-search-item";var d=document.createElement("a");d.className="home-search-link",d.href=o.url;var c=document.createElement("p");c.className="home-search-title",c[judgeTextAttr(c)]=o.title,c.innerHTML=c[judgeTextAttr(c)];var m=document.createElement("p");m.className="home-search-result",m[judgeTextAttr(m)]=o.content,m.innerHTML=m[judgeTextAttr(m)],d.appendChild(c),d.appendChild(m),i.appendChild(d),l.appendChild(i)}contentElement.appendChild(l)}else{var s=document.createElement("p");s.className="home-search-empty",s[judgeTextAttr(s)]="Content not found, try changing the search term.",contentElement.appendChild(s)}}}document.addEventListener("DOMContentLoaded",function(){inputElement=document.getElementById("home-search-input"),loadingElement=document.getElementById("home-search-loading"),contentElement=document.getElementById("home-search-dropdown");var e=document.querySelectorAll('link[rel="alternate"][hreflang]'),t=[];if(e.length>0)for(var n=0;n<e.length;n++)"x-default"!==e[n].getAttribute("hreflang")&&t.push(e[n].getAttribute("hreflang"));var a=new RegExp("^/?("+t.join("|")+")(/|$)"),l=window.location.pathname.match(a),r="";if(!l){var o=localStorage.getItem("language"),i="";if(o){for(var d=0;d<t.length;d++)if(t[d]===o){i=t[d];break}}else for(var c=navigator.language.split("-")[0],m=0;m<t.length;m++)if(t[m]===c){i=t[m];break}return i||(i=t[0]),void(window.location.href="/"+i)}r=l[1],(searchInstance=new Search({url:"/search."+r+".json",keywordClassName:"home-search-keyword"})).onDataLoadSucceeded=function(){loading=!1,loadingElement.style.display="none",contentElement.style.display="block"},inputElement.addEventListener("input",handleInput)});